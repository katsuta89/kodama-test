require=function t(e,i,a){function s(n,_){if(!i[n]){if(!e[n]){var r="function"==typeof require&&require;if(!_&&r)return r(n,!0);if(o)return o(n,!0);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[n]={exports:{}};e[n][0].call(h.exports,function(t){var i=e[n][1][t];return s(i||t)},h,h.exports,t,e,i,a)}return i[n].exports}for(var o="function"==typeof require&&require,n=0;n<a.length;n++)s(a[n]);return s}({AnimationView:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}cc._RF.push(e,"e5d57+zJtRNgbfE1qbyb8gv","AnimationView");var n=t("DebugViewBase"),_=function(t){function e(){a(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.GetView=function(){this._Anim_clip_name=this._CHAR_ANIME.currentClip.name,this._Anim_state=this._CHAR_ANIME.getAnimationState(this._Anim_clip_name),this._Is_Debug_View=2,this.clear_label(),this.add_label("Clip Name",this._Anim_clip_name);var t="";switch(this._CHAR_ANIME.currentClip.wrapMode){case 0:t="Default";break;case 1:t="Normal";break;case 2:t="Loop";break;default:t="その他　里吉に連絡"}this.add_label("Mode",t),this.add_label("[SPACE] StepMode",this._Anim_state.isPaused),this._Anim_Step_Mode&&this.add_label("[P] StepMode cancel","");var e=this._Anim_state.time%this._Anim_state.duration;return this.add_label("Time",e.toFixed(3)+" / "+this._Anim_state.duration.toFixed(3)),this.get_label()},t.update=function(t){if(this._Is_Debug_View<=0)return this._Anim_Step_Mode=!1,this._CHAR_BASE._DEBUG_VIEW_FLAG=!1,void this._Anim_state.resume();this._Is_Debug_View-=1,this._Anim_Step_Mode&&(0==this._Anim_Step_flag?this._Anim_state.pause():this._Anim_Step_flag-=1)},t.GM=cc.director.getScene().getChildByName("Canvas").getComponent("GameManager").GM_CLASS,t.CHAR_M=t.GM.CHARACTER_MANAGER,t._CHAR_BASE=t.CHAR_M._CharBase[0],t._CHAR_ANIME=t.CHAR_M._CharBase[0]._CHARACTER_ANIME,t._Anim_clip_name=t._CHAR_ANIME.currentClip.name,t._Anim_state=t._CHAR_ANIME.getAnimationState(t._Anim_clip_name),t._Is_Debug_View=0,t._Anim_Step_Mode=!1,t._Anim_Step_flag=0,t}return o(e,n),e}();e.exports=_,cc._RF.pop()},{DebugViewBase:"DebugViewBase"}],AttackBase:[function(t,e,i){"use strict";cc._RF.push(e,"79ac6ztuTBCoa34sS7uobUB","AttackBase");var a=cc.Node.extend({ctor:function(){cc.log("New AttackBase onload"),this.Type=-1,this.Vector=new cc.Vec2(0,0),this.active=!1,this.isHit=!1,this.setAnchorPoint(.5,.5),this.startTime=-1,this.endTime=-1,this.collision=null,this.ccSprite=this.addComponent(cc.Sprite),this.ccAnimation=this.addComponent(cc.Animation),this.ccSprite.enabled=!1,this.ccAnimation.enabled=!1,this.target_node=null},hit_callback_AB:function(t){cc.log("AttackBase: hit_callback:"+t),this.isHit=!0},getBlowSpeed:function(){return this.Vector}});e.exports=a,cc._RF.pop()},{}],AttackManagerView:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}cc._RF.push(e,"0a34fpseyVBJa1iT308ktD+","AttackManagerView");var n=t("AttackView"),_=function(t){function e(){a(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.GetView=function(){var t="";return t+="    ShootTimer: "+this.AM.SHOOT_TIMER+"\n",t+="    Move: "+this.AM.move+"\n",t+="    Reserve ATK Base: "+this.AM.ResAB_UseNum+" / "+this.AM.RES_AB_MAX+"\n",t+="    Player Attacks: "+this.AM.ATK_NUM[this.AM.PLAYER_GROUP]+"\n",t+=this.createAttackView(this.AM.PLAYER_GROUP),t+="    Enemy Attacks: "+this.AM.ATK_NUM[this.AM.ENEMY_GROUP]+"\n",t+=this.createAttackView(this.AM.ENEMY_GROUP)},t.AM=t.GM.ATTACK_MANAGER,t}return o(e,n),e}();e.exports=_,cc._RF.pop()},{AttackView:"AttackView"}],AttackManager:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}cc._RF.push(e,"b3fc2JwRYZJxaqj1Y89YgkH","AttackManager");var s,o,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),_=t("AttackBase"),r=(o=s=function(){function t(e,i,s){a(this,t),cc.log("      **** Attack Manager Constructor ****"),t.GM=cc.director.getScene().getChildByName("Canvas").getComponent("GameManager").GM_CLASS,t.CM=t.GM.COLLISION_MANAGER,t.initScreenEdge(),t.SHOOT_TIMER=0,t.ENEMY_GROUP=1,t.PLAYER_GROUP=2,t.TYPE_FOLLOW=1,t.TYPE_SHOOT=2,t.SPRITES=[],t.SPRITES[t.ENEMY_GROUP]=e,t.SPRITES[t.PLAYER_GROUP]=e,t.init_reserved_AB(),t.ATK_NUM=[],t.AtkBase=[],cc.log("      Init Enemy Attacks number"),t.ATK_NUM[t.ENEMY_GROUP]=0,t.AtkBase[t.ENEMY_GROUP]=[],cc.log("      Init Player Attacks number"),t.ATK_NUM[t.PLAYER_GROUP]=0,t.AtkBase[t.PLAYER_GROUP]=[],t.pos_move=new cc.Vec2(0,0)}return n(t,null,[{key:"togleShoot",value:function(){t.notShootFlag?t.notShootFlag=!1:t.notShootFlag=!0}}]),t}(),s.init_reserved_AB=function(){r.RES_AB_MAX=0,r.ResAB_UseNum=0,r.RESERVED_AB=[];for(var t=0;t<60;t++)r.initAtackBase()},s.initAtackBase=function(){var t=r.RES_AB_MAX;r.RESERVED_AB[t]=new _,r.RESERVED_AB[t].ArrayID=t,r.RES_AB_MAX++},s.initScreenEdge=function(){var t=r.GM.STAGE_BASE,e=new cc.Vec2(540,960);e.set(r.GM.CANVAS.convertToWorldSpaceAR(e)),e.set(t.convertToNodeSpaceAR(e)),r._ScreenEdge_w=600,r._ScreenEdge_h=600,cc.log("      Screen Edge set w / h = "+r._ScreenEdge_w,", "+r._ScreenEdge_h)},s.get_reserved_AB=function(){return r.AB_RESERVE_NUM>=r.AB_RESERVE_NUM?(cc.warn("RESERVE AB Num over:"+r.ResAB_UseNum+" / "+r.RES_AB_MAX),null):(r.ResAB_UseNum++,r.RESERVED_AB[r.ResAB_UseNum-1])},s.return_reserved_AB=function(t){r.RESERVED_AB[t].removeFromParent(!1),r.RESERVED_AB[t].ccSprite.enabled=!1,r.RESERVED_AB[t].ccAnimation.enabled=!1;var e=r.RESERVED_AB[t];r.RESERVED_AB[t]=r.RESERVED_AB[r.ResAB_UseNum-1],r.RESERVED_AB[r.ResAB_UseNum-1]=e;var i=r.RESERVED_AB[t].ArrayID;r.RESERVED_AB[t].ArrayID=r.RESERVED_AB[r.ResAB_UseNum-1].ArrayID,r.RESERVED_AB[r.ResAB_UseNum-1].ArrayID=i,r.ResAB_UseNum--},s.shootBullet=function(t,e,i,a,s,o){var n=new cc.Vec2(0,o);a=a*Math.PI/180,s=s*Math.PI/180,n.rotateSelf(a-s*t/2-s/2);for(var _=r.ATK_NUM[r.ENEMY_GROUP],c=void 0,h=_;h<_+t&&null!=(c=r.get_reserved_AB());h++)c.ccSprite.enabled=!0,c.ccSprite.spriteFrame=r.SPRITES[r.ENEMY_GROUP],c.scale=.7,c.parent=r.GM.STAGE_BASE,c.setPosition(e,i),c.isHit=!1,n.rotateSelf(s),c.Vector.set(n),c.active=!0,c.collision=r.CM.setEnemyAtkCol(r.CM.ENEMY,c,5,5,c,-1,-1),r.AtkBase[r.ENEMY_GROUP][h]=c,r.ATK_NUM[r.ENEMY_GROUP]++},s.setAttack=function(t,e,i,a,s,o,n,_,c){var h=this.get_reserved_AB();if(null!=h){h.ccSprite.spriteFrame=r.SPRITES[r.ENEMY_GROUP],h.scale=.7,h.parent=r.GM.STAGE_BASE,h.Vector.set(i),h.setPosition(n.position),cc.log("set Atk pos:"+n.position+", Vector:"+i+", rot:"+c+", Stage:"+r.GM.getStageRotation()),h.rotation=void 0==c?-r.GM.getStageRotation():-r.GM.getStageRotation()-180*c/Math.PI,h.target_node=n,h.scale=1,h.Type=t,h.isHit=!1,h.active=!0,h.startTime=s,h.endTime=o,null==_?(h.ccSprite.enabled=!1,h.ccAnimation.enabled=!1):(h.ccSprite.enabled=!0,h.ccAnimation.enabled=!0,h.ccAnimation.addClip(_,"Anime"),h.ccAnimation.play("Anime")),h.collision=r.CM.setPlayerAtkCol(r.CM.ATTACK,-1,e,h,s,o,h);var A=r.ATK_NUM[r.PLAYER_GROUP];r.AtkBase[r.PLAYER_GROUP][A]=h,r.ATK_NUM[r.PLAYER_GROUP]++}},s.removeBullet=function(t,e){switch(t){case r.ENEMY_GROUP:r.CM.removeEAtkCol(r.AtkBase[t][e].collision.ColID);break;case r.PLAYER_GROUP:r.CM.removePAtkCol(r.AtkBase[t][e].collision.ColID);break;default:cc.warn("Remove Bullety group Error")}r.return_reserved_AB(r.AtkBase[t][e].ArrayID);var i=r.AtkBase[t][e];r.AtkBase[t][e]=r.AtkBase[t][r.ATK_NUM[t]-1],r.AtkBase[t][r.ATK_NUM[t]-1]=i,r.ATK_NUM[t]--},s.fixedUpdate=function(t){r.shoot_count(t);for(var e=r.GM.getStageRotation(),i=0;i<r.ATK_NUM[r.ENEMY_GROUP];i++)r.AtkBase[r.ENEMY_GROUP][i].rotation=-e,r.pos_move.set(r.AtkBase[r.ENEMY_GROUP][i].Vector),r.pos_move.mulSelf(t),r.pos_move.addSelf(r.AtkBase[r.ENEMY_GROUP][i].position),r.AtkBase[r.ENEMY_GROUP][i].setPosition(r.pos_move.x,r.pos_move.y),r.AtkBase[r.ENEMY_GROUP][i].isHit?(r.removeBullet(r.ENEMY_GROUP,i),i--):(Math.abs(r.AtkBase[r.ENEMY_GROUP][i].position.x)>r._ScreenEdge_w||Math.abs(r.AtkBase[r.ENEMY_GROUP][i].position.y)>r._ScreenEdge_h)&&r.removeBullet(r.ENEMY_GROUP,i);for(i=0;i<r.ATK_NUM[r.PLAYER_GROUP];i++){switch(r.AtkBase[r.PLAYER_GROUP][i].Type){case r.TYPE_FOLLOW:r.pos_move.set(r.AtkBase[r.PLAYER_GROUP][i].target_node.position),r.pos_move.addSelf(r.AtkBase[r.PLAYER_GROUP][i].Vector),r.AtkBase[r.PLAYER_GROUP][i].setPosition(r.pos_move);break;case r.TYPE_SHOOT:r.pos_move.set(r.AtkBase[r.PLAYER_GROUP][i].Vector),r.pos_move.mulSelf(t),r.pos_move.addSelf(r.AtkBase[r.PLAYER_GROUP][i].position),r.AtkBase[r.PLAYER_GROUP][i].setPosition(r.pos_move)}r.AtkBase[r.PLAYER_GROUP][i].isHit?(r.removeBullet(r.PLAYER_GROUP,i),i--):(r.AtkBase[r.PLAYER_GROUP][i].endTime-=t,r.AtkBase[r.PLAYER_GROUP][i].endTime<=0&&(r.removeBullet(r.PLAYER_GROUP,i),i--))}},s.shoot_count=function(t){r.SHOOT_TIMER<=0?(Math.random()<0?r.shootBullet(15,0,0,180,4,500):r.shootBullet(6,0,0,180,14,400),r.SHOOT_TIMER=2):0!=r.notShootFlag&&(r.SHOOT_TIMER-=t)},o);e.exports=r,cc._RF.pop()},{AttackBase:"AttackBase"}],AttackView:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}cc._RF.push(e,"bb552FIGCBLOIWCAODU5tWH","AttackView");var n=t("DebugViewBase"),_=function(t){function e(){a(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.createAttackView=function(t){var e=this.AM.AtkBase[t],i="";i+="       loop, ID, Type,  active,      position,                    speed,             isHit \n";for(var a=0;a<this.AM.ATK_NUM[t];a++)i+="        ",i+=this.get2Digit(a)+",    ",i+=this.get2Digit(e[a].ArrayID)+",  ",i+=this.get2Digit(e[a].Type)+",    ",i+=e[a].active+",      ",i+=this.getIntVec2(e[a].position)+",      ",i+=this.getIntVec2(e[a].Vector)+",      ",i+=e[a].isHit+",        ",i+="\n";return i},t.AM=t.GM.ATTACK_MANAGER,t}return o(e,n),e}();e.exports=_,cc._RF.pop()},{DebugViewBase:"DebugViewBase"}],BackToMenu:[function(t,e,i){"use strict";cc._RF.push(e,"1dde31YKExDr5sBDPD2dg9M","BackToMenu"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},BackToMenu:function(){cc.log("Scene Transition to Menu"),cc.director.loadScene("SceneSelect")}}),cc._RF.pop()},{}],"CB-Animation":[function(t,e,i){"use strict";cc._RF.push(e,"2a5b2tA2XREhbDfIVzN69w/","CB-Animation"),e.exports=function(t){t.prototype.InitAnimation=function(){cc.log("          Init Animation"),this._CHAR_DIRECTION=t.DIRECT_UP,this._CHAR_DIRECTION_OLD=1,this.ANIM_CHANGE_FLAG=!1,this.ATK_ANIM_CHANGE_FLAG=!1,this.dirC=0,this.angleC=0},t.prototype.getCorrectedDir=function(){var e=void 0;return e=this._CHAR_DIRECTION==t.DIRECT_NONE?this._CHAR_DIRECTION_OLD:this._CHAR_DIRECTION,this.dirC=22.5-t.GM.getStageRotation(),this.dirC<0&&(this.dirC+=360),this.dirC=this.dirC/45,this.dirC=Math.floor(this.dirC),this.angleC=this.ANGLE+Math.PI/8,this.angleC<0&&(this.angleC+=2*Math.PI),this.angleC=4*this.angleC/Math.PI,this.angleC=Math.floor(this.angleC),e+=this.dirC+this.angleC,e=(e-1)%8+1,t.DirString[e]+"_"},t.prototype.setAnimWithDirection=function(t){var e=this._TYPE+"_";e+=this.getCorrectedDir(),e+=t,this._CHARACTER_ANIME.play(e)},t.prototype.setAtkAnimWithDirection=function(){var t="c00_wpn_";switch(t+=this.getCorrectedDir(),this.atk_combo_num){case 1:this._ATTACK_ANIM.play(t+"atk_a");break;case 2:this._ATTACK_ANIM.play(t+"atk_b");break;case 3:this._ATTACK_ANIM.play(t+"atk_d");break;case 4:this._ATTACK_ANIM.play(t+"atk_e")}},t.prototype.Animation=function(){if(this.ANIM_CHANGE_FLAG&&(this.checkStat(t.RUN)?this.setAnimWithDirection("run"):this.checkStat(t.ATTACK_START)?this.setAnimWithDirection("charge"):this.checkStat(t.ATTACK_BODY)?this.setAnimWithDirection("Atk"):this.checkStat(t.JUMP_START)?this.setAnimWithDirection("jump_start"):this.checkStat(t.JUMP_BODY)?cc.assert(!0,"アニメーションセット ここに来るのは想定外"):this.checkStat(t.JUMP_END)?this.setAnimWithDirection("jump_end"):this.checkStat(t.CHARGE_START)?this.setAnimWithDirection("charge"):this.checkStat(t.CHARGE_BODY)?this.setAnimWithDirection("Atk"):this.checkStat(t.DEAD)?this.setAnimWithDirection("dead"):this._CHAR_DIRECTION==t.DIRECT_NONE?this.setAnimWithDirection("idle"):cc.assert(!0,"アニメーションセット ここに来るのは想定外"),this.ANIM_CHANGE_FLAG=!1),this.ATK_ANIM_CHANGE_FLAG){switch(this._TYPE){case"c00":this.checkStat(t.ATTACK_BODY)?this.setAtkAnimWithDirection():this.checkStat(t.CHARGE_BODY)?this.setAtkAnimWithDirection():cc.warn("ATK_ANIM_CHANGE_FLAG 空振り");break;case"c01":cc.log("ShootArrow"),this._ATTACK_ANIM.play("ShootArrow");break;default:cc.warn("Atk Anime change this._TYPE error")}this.ATK_ANIM_CHANGE_FLAG=!1}}},cc._RF.pop()},{}],"CB-Atk-c00":[function(t,e,i){"use strict";cc._RF.push(e,"4546fTXBupIx6phy8IX74jQ","CB-Atk-c00"),e.exports=function(t){t.prototype.init_c00=function(){this.Atk_Type=t.AM.TYPE_FOLLOW,this.ATTACK_START_TIME=.01,this.ATTACK_BODY_TIME[1]=.25,this.ATTACK_BODY_TIME[2]=.17,this.ATTACK_BODY_TIME[3]=.33,this.ATTACK_END_TIME[1]=.3,this.ATTACK_END_TIME[2]=.4,this.ATTACK_END_TIME[3]=.5,this.ATTACK_RADIUS[1]=50,this.ATTACK_RADIUS[2]=50,this.ATTACK_RADIUS[3]=90,this.ATTACK_RADIUS[4]=120,this.ATTACK_VECTOR[1]=new cc.Vec2(0,35),this.ATTACK_VECTOR[2]=new cc.Vec2(0,35),this.ATTACK_VECTOR[3]=new cc.Vec2(0,50),this.ATTACK_VECTOR[4]=new cc.Vec2(0,70),this.ATK_MOVE_SPEED=200,this.CHARGE_MOVE_SPEED=500},t.prototype.atk_c00=function(e){this.rest_dt=e,this.charge_attack(),this.checkStat(t.CHARGE_ALL)||(this.check_start_charge(this.rest_dt),this.check_start_atk(this.rest_dt),this.normal_attack(),this.combo_continuation_check())},t.prototype.charge_attack=function(){this.checkStat(t.CHARGE_START)&&(this.touch?this.do_charging():this.start_charge_attack()),this.checkStat(t.CHARGE_BODY)&&(this.next_charge_atk(),this.checkAtkTimerEnd()&&this.end_charge_atk())},t.prototype.normal_attack=function(){this.checkStat(t.ATTACK_START)&&this.checkAtkTimerEnd()&&this.start_normal_atk_body(),this.checkStat(t.ATTACK_BODY)&&this.checkAtkTimerEnd()&&this.start_normal_atk_end(),this.checkStat(t.ATTACK_END)&&this.checkAtkTimerEnd()&&this.end_normal_atk()},t.prototype.setFollow=function(e){this._CHAR_DIRECTION=this.get_target_direction(),this._CHAR_DIRECTION_OLD=this._CHAR_DIRECTION,this.setBlowSpeed(this.work_vec2,e),1==this.isValid(t.BLOW)&&this.setStat(t.BLOW)},t.prototype.do_charging=function(){this.charge_timer+=this.rest_dt;var t=this.MAX_CHARGE_TIME*(.25*this.gauge_combo_num+.75);this.LIFE_GAUGE_COMP.set_gauge(this.charge_timer*this.gauge_combo_num/t/3),this.charge_timer>t&&(this.charge_timer=t)},t.prototype.init_charge_attack=function(){this.ANIM_CHANGE_FLAG=!0,this.ATK_ANIM_CHANGE_FLAG=!0,this.gauge_combo_num--,this.LIFE_GAUGE_COMP.set_combo(this.gauge_combo_num),this.setFollow(this.CHARGE_MOVE_SPEED),this.chargeAnimTimer=this.CHARGE_ANIM_TIME,this.work_vec2.set(cc.Vec2.ZERO),t.AM.setAttack(this.Atk_Type,this.ATTACK_RADIUS[this.atk_combo_num],this.work_vec2,this,this.chargeAnimTimer/4,this.chargeAnimTimer,this._BASE_NODE,this._DATA.Animation)},t.prototype.start_charge_attack=function(){this.atk_combo_num=4,this.attack_timer=this.CHARGE_BODY_TIME+this.CHARGE_ANIM_TIME*this.gauge_combo_num,this.ATTACK_SPR.setVisible(!0),this.setStat(t.CHARGE_BODY),this.init_charge_attack()},t.prototype.next_charge_atk=function(){this.chargeAnimTimer<0?this.gauge_combo_num>0?this.init_charge_attack():this.ATTACK_SPR.setVisible(!1):this.chargeAnimTimer-=this.rest_dt},t.prototype.end_charge_atk=function(){this.clearStat(t.CHARGE_ALL),this.combo_continue_timer=0,this.atk_combo_num=0,this.gauge_combo_num=0,this.LIFE_GAUGE_COMP.set_combo(0),this.chargeAnimTimer=0,this.ANIM_CHANGE_FLAG=!0},t.prototype.start_normal_atk_body=function(){this.attack_timer=this.ATTACK_BODY_TIME[this.atk_combo_num],this.setFollow(this.ATK_MOVE_SPEED),this.ATTACK_SPR.setVisible(!0),this.ATK_ANIM_CHANGE_FLAG=!0,this.ANIM_CHANGE_FLAG=!0,this.setStat(t.ATTACK_BODY),this.work_vec2.set(this.ATTACK_VECTOR[this.atk_combo_num]),this.work_vec2.rotateSelf(Math.PI*(this._CHAR_DIRECTION-1)/4),this.work_vec2.rotateSelf(Math.PI*t.GM.getStageRotation()/180),cc.log("Set Attack Dir:"+this._CHAR_DIRECTION);this._TYPE,t.AM.setAttack(this.Atk_Type,this.ATTACK_RADIUS[this.atk_combo_num],this.work_vec2,this,this.attack_timer/4,this.attack_timer,this._BASE_NODE,this._DATA.Animation)},t.prototype.start_normal_atk_end=function(){this.attack_timer=this.ATTACK_END_TIME[this.atk_combo_num],this.ATTACK_SPR.setVisible(!1),this.setStat(t.ATTACK_END)},t.prototype.end_normal_atk=function(){this.combo_continue_timer=this.COMBO_TIME,this.checkStat(t.JUMP_ALL)||(this.ANIM_CHANGE_FLAG=!0),this.clearStat(t.ATTACK_ALL)},t.prototype.check_start_charge=function(){this.touch&&this.gauge_combo_num>0?this.charge_timer>this.CHARGE_START_TIME&&this.nowDirection==t.DIRECT_NONE?1==this.isValid(t.CHARGE_START)&&(this.setStat(t.CHARGE_START),this.clearFlicked(),this.clearTapped(),this.ANIM_CHANGE_FLAG=!0):this.charge_timer+=this.rest_dt:this.charge_timer=0},t.prototype.check_start_atk=function(){if(this.tapped){if(this.atk_combo_num>0&&this.charge_timer>0)return;if(this.atk_combo_num>=3)return void this.clearTapped();1==this.isValid(t.ATTACK_START)&&(this.setStat(t.ATTACK_START),this.clearTapped(),this.atk_combo_num=this.atk_combo_num+1,this.atk_combo_num>this.gauge_combo_num&&(this.LIFE_GAUGE_COMP.set_combo(this.atk_combo_num),this.gauge_combo_num=this.atk_combo_num),this.attack_timer=this.ATTACK_START_TIME,this.ANIM_CHANGE_FLAG=!0)}},t.prototype.combo_continuation_check=function(){0==this.checkStat(t.ATTACK_ALL)&&0==this.checkStat(t.CHARGE_ALL)&&this.combo_continue_timer>0&&(this.combo_continue_timer-=this.rest_dt,this.combo_continue_timer<=0&&(this.combo_continue_timer=0,this.atk_combo_num=0))}},cc._RF.pop()},{}],"CB-Atk-c01":[function(t,e,i){"use strict";cc._RF.push(e,"7dd5cMEBwJBvoQ312d69S9a","CB-Atk-c01"),e.exports=function(t){t.prototype.init_c01=function(){this.Atk_Type=t.AM.TYPE_SHOOT,this.ATTACK_START_TIME=.01,this.ATTACK_BODY_TIME[0]=.5,this.ATTACK_END_TIME[0]=.3,this.ATTACK_RADIUS[0]=30,this.ATTACK_VECTOR[0]=new cc.Vec2(0,700)},t.prototype.atk_c01=function(t){this.rest_dt=t,this.check_start_shoot(this.rest_dt),this.normal_shoot()},t.prototype.normal_shoot=function(){this.checkStat(t.ATTACK_START)&&this.checkAtkTimerEnd()&&this.start_shoot_body(),this.checkStat(t.ATTACK_BODY)&&this.checkAtkTimerEnd()&&this.start_shoot_end(),this.checkStat(t.ATTACK_END)&&this.checkAtkTimerEnd()&&this.end_shoot()},t.prototype.start_shoot_body=function(){this.attack_timer=this.ATTACK_BODY_TIME[0],this.ATTACK_SPR.setVisible(!0),this.ATK_ANIM_CHANGE_FLAG=!0,this.ANIM_CHANGE_FLAG=!0,this.setStat(t.ATTACK_BODY),this._CHAR_DIRECTION=this.get_target_direction(),this._CHAR_DIRECTION_OLD=this._CHAR_DIRECTION,this.work_vec2.set(this.ATTACK_VECTOR[0]);var e=this._CHAR_DIRECTION-1;e>=5&&(e-=8),e=Math.PI*e/10,this.work_vec2.rotateSelf(e),this.work_vec2.rotateSelf(Math.PI*t.GM.getStageRotation()/180),cc.log("Set Attack Dir:"+this._CHAR_DIRECTION),t.AM.setAttack(this.Atk_Type,this.ATTACK_RADIUS[0],this.work_vec2,this,this.attack_timer/4,3*this.attack_timer,this._BASE_NODE,this._DATA.Animation,e)},t.prototype.start_shoot_end=function(){this.attack_timer=this.ATTACK_END_TIME[0],this.ATTACK_SPR.setVisible(!1),this.setStat(t.ATTACK_END)},t.prototype.end_shoot=function(){this.checkStat(t.JUMP_ALL)||(this.ANIM_CHANGE_FLAG=!0),this.clearStat(t.ATTACK_ALL)},t.prototype.check_start_shoot=function(){this.tapped&&1==this.isValid(t.ATTACK_START)&&(this.setStat(t.ATTACK_START),this.clearTapped(),this.attack_timer=this.ATTACK_START_TIME,this.ANIM_CHANGE_FLAG=!0)}},cc._RF.pop()},{}],"CB-Attack":[function(t,e,i){"use strict";cc._RF.push(e,"91ad2smc0ROCoVTpo+jrq4s","CB-Attack"),e.exports=function(t){t.prototype.InitAtack=function(){switch(cc.log("          Init Attack"),this.attack_timer=0,this.gauge_combo_num=0,this.atk_combo_num=0,this.COMBO_MAX=3,this.combo_continue_timer=0,this.COMBO_TIME=.5,this.CHARGE_ATTACK=!1,this.charge_timer=0,this.CHARGE_START_TIME=.18,this.MAX_CHARGE_TIME=1,this.chargeAnimTimer=0,this.CHARGE_ANIM_TIME=.5,this.CHARGE_BODY_TIME=.5,this.ATTACK_BODY_TIME=[],this.ATTACK_END_TIME=[],this.ATTACK_RADIUS=[],this.ATTACK_VECTOR=[],this.work_vec2=new cc.Vec2,this._TYPE){case"c00":this.init_c00(),this.atk_func=this.atk_c00;break;case"c01":this.init_c01(),this.atk_func=this.atk_c01;break;case"HvyA":this.Atk_Type=t.AM.TYPE_FOLLOW,this.ATTACK_START_TIME=.8,this.ATTACK_BODY_TIME[1]=1,this.ATTACK_BODY_TIME[2]=1,this.ATTACK_BODY_TIME[3]=1,this.ATTACK_END_TIME[1]=.3,this.ATTACK_END_TIME[2]=.05,this.ATTACK_END_TIME[3]=.05,this.ATTACK_RADIUS[1]=50,this.ATTACK_RADIUS[2]=50,this.ATTACK_RADIUS[3]=90,this.ATTACK_RADIUS[4]=120,this.ATTACK_VECTOR[1]=new cc.Vec2(0,35),this.ATTACK_VECTOR[2]=new cc.Vec2(0,35),this.ATTACK_VECTOR[3]=new cc.Vec2(0,50),this.ATTACK_VECTOR[4]=new cc.Vec2(0,70),this.ATK_MOVE_SPEED=200,this.CHARGE_MOVE_SPEED=100,this.atk_func=this.atk_c00}},t.prototype.get_target_direction=function(){this.Target||(this.Target=t.GM.getTargetDragonPos(0)),this.work_vec2.set(this.Target),this.work_vec2.subSelf(this._BASE_NODE.position);var e=Math.atan2(this.work_vec2.y,this.work_vec2.x);return(e-=3*Math.PI/8)<0&&(e+=2*Math.PI),e=Math.floor(4*e/Math.PI)+1+this.dirC,e=(e-1)%8+1},t.prototype.Attack=function(t){this.atk_func(t)},t.prototype.checkAtkTimerEnd=function(){return this.attack_timer-=this.rest_dt,this.attack_timer<=0?(this.rest_dt=-this.attack_timer,this.attack_timer=0,!0):(this.rest_dt=0,!1)}},cc._RF.pop()},{}],"CB-Callback":[function(t,e,i){"use strict";cc._RF.push(e,"3d356PNBilFPJY0TnDbJ6tv","CB-Callback"),e.exports=function(t){t.prototype.bodyHit=function(t,e){cc.log("\n ******  Dragon-Character Hit  ******");var i=new cc.Vec2;i.set(this._BASE_NODE.position),cc.log("CHAR:"+i),cc.log("DRAGON:"+t),i.subSelf(t),cc.log("Dist:"+i),i.normalizeSelf(),cc.log("Vec:"+i),cc.log("Length:"+e+" : "+this.BODY_RADIUS),i.mulSelf(e+this.BODY_RADIUS),cc.log("MoveDist:"+i),i.addSelf(t),cc.log("FinalPos:"+i),this._BASE_NODE.setPosition(i)}},cc._RF.pop()},{}],"CB-Control":[function(t,e,i){"use strict";cc._RF.push(e,"1f97c9qtcZHKIkPDDdqG+fT","CB-Control"),e.exports=function(t){t.prototype.InitControl=function(){cc.log("          Init Control"),this.tapped=!1,this.tappedBuffer=0,this.tappedTimer=0,this.TAP_TIME=.5,this.flicked=!1,this.flickedTimer=0,this.touch=!1,this.touch=!1,this.nowDirection=0,this.InputManager=t.GM.INPUT_MANAGER,null==this.InputManager&&cc.warn("Input Managerが宣言されてないよ")},t.prototype.Control=function(e){this.checkStat(t.DEAD)||(this.nowDirection=this.InputManager._Pad.Dir,this._CHAR_DIRECTION!=this.nowDirection&&(this._CHAR_DIRECTION!=t.DIRECT_NONE&&(this._CHAR_DIRECTION_OLD=this._CHAR_DIRECTION),this._CHAR_DIRECTION=this.nowDirection,this.checkStat(t.RUN)&&(this.ANIM_CHANGE_FLAG=!0)),this.flicked=this.InputManager._Pad.Flicked,this.tapped=this.InputManager._Pad.Tapped,this.touch=this.InputManager._Pad.Touch,this.tapped?this.tappedTimer>0?this.tappedBuffer++:this.tappedTimer=this.TAP_TIME:this.tappedTimer>0&&(this.tapped=!0,this.tappedTimer-=e,this.tappedTimer<=0&&(this.tappedTimer=0,this.tapped=!1)),this.flicked?this.flickedTimer=.5:this.flickedTimer>0&&(this.flicked=!0,this.flickedTimer-=e,this.flickedTimer<=0&&(this.flickedTimer=0,this.flicked=!1)),0==this.tappedTimer&&this.tappedBuffer>0&&(this.tappedTimer=this.TAP_TIME,this.tappedBuffer--,this.tapped=!0))},t.prototype.clearTapped=function(){this.tapped=!1,this.tappedTimer=0},t.prototype.clearFlicked=function(){this.flicked=!1,this.flickedTimer=0}},cc._RF.pop()},{}],"CB-Damage":[function(t,e,i){"use strict";cc._RF.push(e,"7102fZlc6dISr0cvmHmGB1Q","CB-Damage"),e.exports=function(t){t.prototype.InitDamage=function(){cc.log("          Init Damage"),this._damage_timer=0,this._damage_blink_timer=0},t.prototype.is_hit=function(e){return!this.checkStat(t.DEAD)&&(!(this.checkStat(t.JUMP_BODY)&&this.jumpHeight>6)&&!this.checkStat(t.INVINC))},t.prototype.damageCharacter=function(e,i){this._damage_timer=1.5,this._CHARACTER_NODE.getComponent(cc.Sprite).dstBlendFactor=cc.BlendFunc.BlendFactor.ONE,this._damage_blink_timer=.1,1==this.isValid(t.BLOW)&&(this.setStat(t.BLOW),this.setBlowSpeed(i,this.BLOW_SPEED)),this.Life-=e,this.Life<=0&&(this.Life=0,this.setStat(t.DEAD),this.ANIM_CHANGE_FLAG=!0),this.LIFE_GAUGE_COMP.set_life(this.Life/this.LIFE_POINT_MAX),1==this.isValid(t.INVINC)&&this.setStat(t.INVINC)},t.prototype.damage_check=function(e){if(this.checkStat(t.INVINC)){if(this._damage_timer<=0)return this._damage_timer=0,this._CHARACTER_NODE.active=!0,void this.clearStat(t.INVINC);this._damage_timer-=e,this._damage_blink_timer<=0?(this._CHARACTER_NODE.active?this._CHARACTER_NODE.active=!1:this._CHARACTER_NODE.active=!0,this._CHARACTER_NODE.getComponent(cc.Sprite).dstBlendFactor=cc.BlendFunc.BlendFactor.ONE_MINUS_SRC_ALPHA,this._damage_blink_timer+=.1):this._damage_blink_timer-=e}this.checkStat(t.DEAD)&&(this._damage_blink_timer<0?(0!=this._damage_blink_timer&&(this._CHARACTER_NODE.getComponent(cc.Sprite).dstBlendFactor=cc.BlendFunc.BlendFactor.ONE_MINUS_SRC_ALPHA),this._damage_blink_timer=0):0!=this._damage_blink_timer&&(this._damage_blink_timer-=e))}},cc._RF.pop()},{}],"CB-Init":[function(t,e,i){"use strict";cc._RF.push(e,"a3fbc+GnJ1A47IBF1al0Yeq","CB-Init");var a=t("LifeGauge");e.exports=function(t){t.prototype.initCharParam=function(){switch(cc.log("          Init Params"),this._TYPE){case"c00":this.GroundHight=-18,this.LIFE_POINT_MAX=100;break;case"c01":this.GroundHight=-18,this.LIFE_POINT_MAX=80;break;case"HvyA":this.GroundHight=-50,this.LIFE_POINT_MAX=200}this.Life=this.LIFE_POINT_MAX},t.prototype.initViewObjects=function(e,i,a){cc.log("          Init ViewObjects");var s=new cc.Node("Base_"+this._TYPE);s.anchorX=.5,s.anchorY=0,s.parent=t.STAGE_BASE,s.setPosition(i),this._BASE_NODE=s,cc.log("            Made _BASE_NODE"),this.init_char_object(e);var o=this._CHARACTER_NODE.getComponent("Char-Container");this._DATA=o,this.init_atk_object(o.Attack),this.init_lifegauge_object(o.LifeGauge),cc.instantiate(a).parent=this._BASE_NODE},t.prototype.init_char_object=function(t){var e=cc.instantiate(t);e.parent=this._BASE_NODE,this._CHARACTER_NODE=e,this._CHARACTER_NODE.setPosition(0,this.GroundHight),this._CHARACTER_ANIME=e.getComponent(cc.Animation),cc.log("            Instantiate Character prefab"),this._CHARACTER_ANIME.play(this._TYPE+"_D_idle"),cc.log("            Anime Play: "+this._TYPE+"_D_idle")},t.prototype.init_atk_object=function(t){this.ATTACK_NODE=new cc.Node("AttackBase"+this._TYPE),this.ATTACK_NODE.setPosition(0,this.GroundHight),this.ATTACK_NODE.parent=this._BASE_NODE,cc.log("            Made AttackBase node");var e=cc.instantiate(t);this.ATTACK_NODE.addChild(e),cc.log("            Instantiate AtkPrefab"),this._ATTACK_ANIM=e.getComponent(cc.Animation),this.ATTACK_SPR=e.getComponent(cc.Sprite),this.ATTACK_SPR.setVisible(!1)},t.prototype.init_lifegauge_object=function(t){var e=cc.instantiate(t);e.parent=this._BASE_NODE,this.LIFE_GAUGE_COMP=new a(this,e),cc.log("            Instantiate LifeGauge")}},cc._RF.pop()},{LifeGauge:"LifeGauge"}],"CB-Jump":[function(t,e,i){"use strict";cc._RF.push(e,"5db75tbTyJOCI3+D6WB4uGV","CB-Jump"),e.exports=function(t){t.prototype.InitJump=function(){switch(cc.log("          Init Jump"),this._jumpTimer=0,this._jump_power=0,this.jumpHeight=0,this._TYPE){case"c00":this.JUMP_POWER=200,this.GRAVITY=700,this.JumpStartTime=.07,this.JumpLandGapTime=.1,this.GroundHight=-18;break;case"c01":this.JUMP_POWER=220,this.GRAVITY=500,this.JumpStartTime=.03,this.JumpLandGapTime=.02,this.GroundHight=-18;break;case"HvyA":this.JUMP_POWER=50,this.GRAVITY=250,this.JumpStartTime=.01,this.JumpLandGapTime=.1,this.GroundHight=-50}},t.prototype.getJumpHeight=function(){return this.jumpHeight},t.prototype.Jump=function(e){this.flicked&&1==this.isValid(t.JUMP_START)&&(this.setStat(t.JUMP_START),this._jump_power=this.JUMP_POWER,this.ANIM_CHANGE_FLAG=!0,this._jumpTimer=0,this.clearFlicked(),this.clearTapped()),this.checkStat(t.JUMP_ALL)&&this.do_jump(e)},t.prototype.do_jump=function(e){if(this.checkStat(t.JUMP_START))this._jumpTimer>this.JumpStartTime&&this.setStat(t.JUMP_BODY);else if(this.checkStat(t.JUMP_BODY)){var i=this._jump_power;this._jumpTimer-e<this.JumpStartTime&&(e=e+this._jumpTimer-this.JumpStartTime),this._jump_power-=e*this.GRAVITY;var a=this._jump_power*e+(i-this._jump_power)*e/2;this.jumpHeight+=a,this._CHARACTER_NODE.setPosition(0,this._CHARACTER_NODE.getPositionY()+a),this._CHARACTER_NODE.getPositionY()<=this.GroundHight&&(this._jump_power=0,this._jumpTimer=0,this.jumpHeight=0,this._CHARACTER_NODE.setPosition(0,this.GroundHight),this.setStat(t.JUMP_END),this.ANIM_CHANGE_FLAG=!0)}else this.checkStat(t.JUMP_END)&&this._jumpTimer>this.JumpLandGapTime&&(this.clearStat(t.JUMP_ALL),this._jumpTimer=0,this.ANIM_CHANGE_FLAG=!0);this._jumpTimer+=e}},cc._RF.pop()},{}],"CB-Move":[function(t,e,i){"use strict";cc._RF.push(e,"b42d0DZE8hMz6nJ5i9pWbTz","CB-Move"),e.exports=function(t){t.prototype.InitMove=function(){switch(cc.log("          Init Move"),this.moveSpeed=new cc.Vec2(0,0),this.moveSpeedOld=new cc.Vec2(0,0),this.accelFlag=!1,this.blowSpeed=new cc.Vec2(0,0),this.blowSpeedOld=new cc.Vec2(0,0),this.blowFlag=!1,this.blowTimer=0,this.BLOW_CANT_MOVE_TIME=.3,this.DISTANCE=0,this.BLOW_BREAK=1e3,this._TYPE){case"c00":this.ACCELL=1e3,this.BREAK=700,this.MAX_SPEED=130,this.MAX_SPEED_SQR=this.MAX_SPEED*this.MAX_SPEED,this.BLOW_SPEED=130;break;case"c01":this.ACCELL=1500,this.BREAK=900,this.MAX_SPEED=280,this.MAX_SPEED_SQR=this.MAX_SPEED*this.MAX_SPEED,this.BLOW_SPEED=270;break;case"HvyA":this.ACCELL=70,this.BREAK=40,this.MAX_SPEED=50,this.MAX_SPEED_SQR=this.MAX_SPEED*this.MAX_SPEED,this.BLOW_SPEED=100}this.STOP_SPEED_SQR=Math.pow(.05*this.BLOW_BREAK,2),this.ORIGINAL_POS=new cc.Vec2,this.ORIGINAL_POS.set(this._BASE_NODE.position)},t.prototype.Move=function(e){if(this.nowDirection!=t.DIRECT_NONE?this.isValid(t.RUN)&&0==this.checkStat(t.RUN)&&(this.ANIM_CHANGE_FLAG=!0,this.setStat(t.RUN)):this.clearStat(t.RUN),1==this.checkStat(t.JUMP_BODY));else if(this.checkStat(t.ATTACK_ALL))this.breakSpeed(e);else if(1==this.checkStatAny(t.RUN)){var i=new cc.Vec2(0,this.ACCELL);i.rotateSelf(Math.PI*(.25*(this.nowDirection-1))+this.ANGLE),this.accelSpeed(i,e)}else this.breakSpeed(e);this.moveCharacter(e),this.checkStat(t.BLOW)&&(this.blowUpdate(e),this.blowCharacter(e)),this.DISTANCE=this._BASE_NODE.position.mag(),this.ANGLE=Math.atan2(this._BASE_NODE.y,this._BASE_NODE.x),this.ANGLE+=Math.PI/2,this.ANGLE>Math.PI&&(this.ANGLE-=2*Math.PI)},t.prototype.accelSpeed=function(t,e){var i=this.getDtBlowCantMove(e);if(0!=i){var a=void 0;(a=this.moveSpeed.equals(cc.Vec2.ZERO)?cc.Vec2.ZERO:this.moveSpeed.sub(this.moveSpeed.normalize().mul(this.BREAK*i))).addSelf(t.mul(i)),a.magSqr()>this.MAX_SPEED_SQR&&a.set(a.normalize().mulSelf(this.MAX_SPEED)),this.moveSpeedOld.set(this.moveSpeed),this.moveSpeed.set(a),this.accelFlag&&cc.warn("accelSpeedが同一Frameで２回以上呼ばれています"),this.accelFlag=!0}},t.prototype.breakSpeed=function(t){var e=this.getDtBlowCantMove(t);if(0!=e){var i=void 0;i=this.moveSpeed.magSqr()<this.STOP_SPEED_SQR?cc.Vec2.ZERO:this.moveSpeed.sub(this.moveSpeed.normalize().mul(this.BREAK*e)),this.moveSpeedOld.set(this.moveSpeed),this.moveSpeed.set(i),this.accelFlag&&cc.warn("accelSpeedが同一Frameで２回以上呼ばれています"),this.accelFlag=!0}},t.prototype.getDtBlowCantMove=function(e){return 0==this.checkStat(t.BLOW)?e:this.blowTimer<this.BLOW_CANT_MOVE_TIME?0:this.blowTimer-e<this.BLOW_CANT_MOVE_TIME?this.BLOW_CANT_MOVE_TIME-this.blowTimer:e},t.prototype.moveCharacter=function(t){var e=this.getDtBlowCantMove(t);if(0!=e){var i=this.moveSpeed.sub(this.moveSpeedOld);i.mulSelf(.5*e),i.addSelf(this.moveSpeedOld.mul(e)),i.addSelf(this._BASE_NODE.position),this._BASE_NODE.setPosition(i.x,i.y),this.accelFlag=!1}},t.prototype.blowUpdate=function(e){var i=void 0;if(this.blowSpeed.equals(cc.Vec2.ZERO)&&this.blowSpeedOld.equals(cc.Vec2.ZERO))return this.clearStat(t.BLOW),void(this.blowTimer=0);i=this.blowSpeed.magSqr()<this.STOP_SPEED_SQR?cc.Vec2.ZERO:this.blowSpeed.sub(this.blowSpeed.normalize().mul(this.BLOW_BREAK*e)),this.blowSpeedOld.set(this.blowSpeed),this.blowSpeed.set(i),this.blowFlag&&cc.warn("blowSpeedが同一Frameで２回以上呼ばれています"),this.blowTimer+=e,this.blowFlag=!0},t.prototype.blowCharacter=function(t){var e=this.blowSpeed.sub(this.blowSpeedOld);e.mulSelf(.5*t),e.addSelf(this.blowSpeedOld.mul(t)),e.addSelf(this._BASE_NODE.position),this._BASE_NODE.setPosition(e.x,e.y),this.blowFlag=!1},t.prototype.setBlowSpeed=function(t,e){var i=new cc.Vec2;i.set(t.normalize().mul(e)),this.blowSpeed.addSelf(i)}},cc._RF.pop()},{}],"CB-Stage":[function(t,e,i){"use strict";cc._RF.push(e,"1775cVzOxhPuoFDTKaQBQ5G","CB-Stage"),e.exports=function(t){t.prototype.InitStage=function(){cc.log("          Init Stage"),this.ORIGINAL_POS=new cc.Vec2,this.ORIGINAL_POS.set(this._BASE_NODE.position)},t.prototype.StageUpdate=function(e){this._BASE_NODE.rotation=-t.GM.getStageRotation(),t.GM.setCharMove(this._BASE_NODE.x-this.ORIGINAL_POS.x,this._BASE_NODE.y-this.ORIGINAL_POS.y)}},cc._RF.pop()},{}],"CB-Status":[function(t,e,i){"use strict";cc._RF.push(e,"2c6465Hgl1J87RqM+DnGZrJ","CB-Status"),e.exports=function(t){t.FLAG_NAME=["DEAD","RESURRECT","STONE","DOWN","DOWN_END","FREEZE","L_DAMAGE","PARALYSE","FIRE","POISON","JUMP_START","JUMP_BODY","JUMP_END","ATTACK_START","ATTACK_BODY","ATTACK_END","SKILL_START","SKILL_BODY","GUARD","RUN","CHARGE_START","CHARGE_BODY","CURE","SPECIAL1","SPECIAL2","BLOW","INVINC","IDLE","DAM_BLINK","TRACK"],t.subFlagInitDone=!1,t.OW_FLAGS=[],t.INVALID_FLAGS=[],t.ERROR_FLAGS=[],t.checkFlag=function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];for(var s=0;s<i.length;s++)i[s]=i[s]&t,i[0]=i[0]*i[s];return 0!=i[0]},t.showFlag=function(e){for(var i="FlagResult:\n",a=0;a<t.FLAGS.length;a++)this.checkFlag(e,t.FLAGS[a])&&(i+="    "+t.FLAG_NAME[a]+"\n");cc.log(i)},t.getFlagID=function(t){return Math.log2(t>>>0)},t.getOWFlag=function(e){return t.OW_FLAGS[t.getFlagID(e)]},t.getInvalidFlag=function(e){return t.INVALID_FLAGS[t.getFlagID(e)]},t.getErrorFlag=function(e){return t.ERROR_FLAGS[t.getFlagID(e)]},t.flagMake=function(e,i){var a=t.getFlagID(i);e[a]=0;for(var s=arguments.length,o=Array(s>2?s-2:0),n=2;n<s;n++)o[n-2]=arguments[n];for(var _=0;_<o.length;_++)e[a]=e[a]|o[_]},t.initSubFlags=function(){1!=t.subFlagInitDone&&(cc.log("          Init Status Flags"),t.flagInitDone=!0,t.flagMake(t.OW_FLAGS,t.DEAD,t.STONE,t.DOWN,t.DOWN_END,t.FREEZE,t.L_DAMAGE,t.PARALYSE,t.FIRE,t.POISON,t.JUMP_START,t.JUMP_BODY,t.JUMP_END,t.ATTACK_START,t.ATTACK_BODY,t.ATTACK_END,t.SKILL_START,t.SKILL_BODY,t.GUARD,t.RUN,t.CHARGE_START,t.CHARGE_BODY,t.CURE,t.SPECIAL1,t.SPECIAL2,t.IDLE,t.DAM_BLINK,t.TRACK),t.flagMake(t.OW_FLAGS,t.RESURRECT,t.DEAD,t.STONE,t.TRACK),t.flagMake(t.OW_FLAGS,t.STONE,t.DOWN,t.DOWN_END,t.FREEZE,t.L_DAMAGE,t.PARALYSE,t.FIRE,t.POISON,t.JUMP_START,t.JUMP_BODY,t.JUMP_END,t.ATTACK_START,t.ATTACK_BODY,t.ATTACK_END,t.SKILL_START,t.SKILL_BODY,t.GUARD,t.RUN,t.CHARGE_START,t.CHARGE_BODY,t.CURE,t.SPECIAL2,t.IDLE,t.DAM_BLINK,t.TRACK),t.flagMake(t.OW_FLAGS,t.DOWN,t.DOWN,t.DOWN_END,t.L_DAMAGE,t.JUMP_START,t.JUMP_BODY,t.JUMP_END,t.ATTACK_START,t.ATTACK_BODY,t.ATTACK_END,t.SKILL_START,t.SKILL_BODY,t.RUN,t.CHARGE_START,t.CHARGE_BODY,t.CURE,t.SPECIAL2,t.IDLE,t.DAM_BLINK,t.TRACK),t.flagMake(t.OW_FLAGS,t.DOWN_END,t.DOWN,t.TRACK),t.flagMake(t.OW_FLAGS,t.FREEZE,t.DOWN,t.DOWN_END,t.L_DAMAGE,t.FIRE,t.POISON,t.JUMP_START,t.JUMP_BODY,t.JUMP_END,t.ATTACK_START,t.ATTACK_BODY,t.ATTACK_END,t.SKILL_START,t.SKILL_BODY,t.RUN,t.CHARGE_START,t.CHARGE_BODY,t.CURE,t.SPECIAL2,t.IDLE,t.TRACK),t.flagMake(t.OW_FLAGS,t.L_DAMAGE,t.DOWN_END,t.L_DAMAGE,t.JUMP_START,t.JUMP_END,t.ATTACK_START,t.ATTACK_BODY,t.ATTACK_END,t.SKILL_START,t.SKILL_BODY,t.RUN,t.CHARGE_START,t.CHARGE_BODY,t.CURE,t.SPECIAL2,t.IDLE,t.DAM_BLINK),t.flagMake(t.OW_FLAGS,t.PARALYSE,t.DOWN_END,t.L_DAMAGE,t.JUMP_START,t.JUMP_BODY,t.JUMP_END,t.ATTACK_START,t.ATTACK_BODY,t.ATTACK_END,t.SKILL_START,t.SKILL_BODY,t.RUN,t.CHARGE_START,t.CHARGE_BODY,t.CURE,t.SPECIAL2,t.IDLE,t.TRACK),t.flagMake(t.OW_FLAGS,t.FIRE),t.flagMake(t.OW_FLAGS,t.POISON),t.flagMake(t.OW_FLAGS,t.JUMP_START,t.ATTACK_END,t.GUARD,t.RUN,t.IDLE),t.flagMake(t.OW_FLAGS,t.JUMP_BODY,t.JUMP_START,t.IDLE),t.flagMake(t.OW_FLAGS,t.JUMP_END,t.JUMP_BODY,t.IDLE),t.flagMake(t.OW_FLAGS,t.ATTACK_START,t.ATTACK_END,t.GUARD,t.RUN,t.IDLE),t.flagMake(t.OW_FLAGS,t.ATTACK_BODY,t.ATTACK_START,t.CHARGE_START,t.IDLE),t.flagMake(t.OW_FLAGS,t.ATTACK_END,t.ATTACK_BODY,t.CHARGE_BODY,t.IDLE),t.flagMake(t.OW_FLAGS,t.SKILL_START,t.JUMP_START,t.ATTACK_START,t.ATTACK_END,t.GUARD,t.RUN,t.CHARGE_START,t.IDLE),t.flagMake(t.OW_FLAGS,t.SKILL_BODY,t.IDLE),t.flagMake(t.OW_FLAGS,t.GUARD,t.ATTACK_START,t.RUN,t.CHARGE_START,t.IDLE,t.TRACK),t.flagMake(t.OW_FLAGS,t.RUN,t.GUARD,t.RUN,t.IDLE),t.flagMake(t.OW_FLAGS,t.CHARGE_START,t.ATTACK_END,t.GUARD,t.RUN,t.IDLE),t.flagMake(t.OW_FLAGS,t.CHARGE_BODY,t.ATTACK_START,t.CHARGE_START,t.IDLE),t.flagMake(t.OW_FLAGS,t.CURE,t.STONE,t.FREEZE,t.PARALYSE,t.FIRE,t.POISON),t.flagMake(t.OW_FLAGS,t.SPECIAL1,t.DOWN_END,t.L_DAMAGE,t.JUMP_START,t.JUMP_END,t.ATTACK_START,t.ATTACK_END,t.GUARD,t.RUN,t.CHARGE_START,t.IDLE),t.flagMake(t.OW_FLAGS,t.SPECIAL2,t.JUMP_START,t.ATTACK_START,t.ATTACK_END,t.GUARD,t.RUN,t.CHARGE_START,t.IDLE),t.flagMake(t.OW_FLAGS,t.BLOW,t.TRACK),t.flagMake(t.OW_FLAGS,t.INVINC),t.flagMake(t.OW_FLAGS,t.IDLE),t.flagMake(t.OW_FLAGS,t.DAM_BLINK,t.DAM_BLINK),t.flagMake(t.OW_FLAGS,t.TRACK),t.flagMake(t.INVALID_FLAGS,t.DEAD,t.DEAD,t.RESURRECT,t.INVINC),t.flagMake(t.INVALID_FLAGS,t.RESURRECT,t.RESURRECT,t.DOWN,t.DOWN_END,t.FREEZE,t.L_DAMAGE,t.PARALYSE,t.FIRE,t.POISON,t.JUMP_START,t.JUMP_BODY,t.JUMP_END,t.ATTACK_START,t.ATTACK_BODY,t.ATTACK_END,t.SKILL_START,t.SKILL_BODY,t.GUARD,t.RUN,t.CHARGE_START,t.CHARGE_BODY,t.CURE,t.SPECIAL1,t.SPECIAL2,t.INVINC,t.IDLE,t.DAM_BLINK),t.flagMake(t.INVALID_FLAGS,t.STONE,t.DEAD,t.RESURRECT,t.SPECIAL1,t.INVINC),t.flagMake(t.INVALID_FLAGS,t.DOWN,t.DEAD,t.RESURRECT,t.SPECIAL1,t.INVINC),t.flagMake(t.INVALID_FLAGS,t.DOWN_END,t.GUARD),t.flagMake(t.INVALID_FLAGS,t.FREEZE,t.DEAD,t.RESURRECT,t.STONE,t.SPECIAL1,t.INVINC),t.flagMake(t.INVALID_FLAGS,t.L_DAMAGE,t.DEAD,t.RESURRECT,t.SPECIAL1,t.INVINC),t.flagMake(t.INVALID_FLAGS,t.PARALYSE,t.DEAD,t.RESURRECT,t.STONE,t.FREEZE,t.GUARD,t.SPECIAL1,t.INVINC),t.flagMake(t.INVALID_FLAGS,t.FIRE,t.DEAD,t.RESURRECT,t.STONE,t.FREEZE,t.SPECIAL1,t.INVINC),t.flagMake(t.INVALID_FLAGS,t.POISON,t.DEAD,t.RESURRECT,t.STONE,t.FREEZE,t.SPECIAL1,t.INVINC),t.flagMake(t.INVALID_FLAGS,t.JUMP_START,t.DEAD,t.RESURRECT,t.STONE,t.DOWN,t.DOWN_END,t.FREEZE,t.L_DAMAGE,t.PARALYSE,t.JUMP_START,t.JUMP_BODY,t.JUMP_END,t.ATTACK_START,t.ATTACK_BODY,t.SKILL_START,t.SKILL_BODY,t.CHARGE_START,t.CHARGE_BODY,t.SPECIAL1,t.SPECIAL2),t.flagMake(t.INVALID_FLAGS,t.JUMP_BODY,t.CHARGE_BODY,t.SPECIAL2),t.flagMake(t.INVALID_FLAGS,t.JUMP_END,t.FREEZE,t.CHARGE_BODY,t.SPECIAL2),t.flagMake(t.INVALID_FLAGS,t.ATTACK_START,t.DEAD,t.RESURRECT,t.STONE,t.DOWN,t.DOWN_END,t.FREEZE,t.L_DAMAGE,t.PARALYSE,t.JUMP_START,t.JUMP_END,t.ATTACK_START,t.ATTACK_BODY,t.SKILL_START,t.SKILL_BODY,t.CHARGE_START,t.CHARGE_BODY,t.SPECIAL1,t.SPECIAL2),t.flagMake(t.INVALID_FLAGS,t.ATTACK_BODY,t.JUMP_END),t.flagMake(t.INVALID_FLAGS,t.ATTACK_END,t.JUMP_END),t.flagMake(t.INVALID_FLAGS,t.SKILL_START,t.DEAD,t.RESURRECT,t.STONE,t.DOWN,t.DOWN_END,t.FREEZE,t.L_DAMAGE,t.PARALYSE,t.JUMP_BODY,t.JUMP_END,t.ATTACK_BODY,t.SKILL_START,t.SKILL_BODY,t.CHARGE_BODY,t.SPECIAL1,t.SPECIAL2),t.flagMake(t.INVALID_FLAGS,t.SKILL_BODY),t.flagMake(t.INVALID_FLAGS,t.GUARD,t.DEAD,t.RESURRECT,t.STONE,t.DOWN,t.DOWN_END,t.FREEZE,t.L_DAMAGE,t.PARALYSE,t.JUMP_START,t.JUMP_BODY,t.JUMP_END,t.ATTACK_BODY,t.ATTACK_END,t.SKILL_START,t.SKILL_BODY,t.GUARD,t.CHARGE_BODY,t.SPECIAL1,t.SPECIAL2),t.flagMake(t.INVALID_FLAGS,t.RUN,t.DEAD,t.RESURRECT,t.STONE,t.DOWN,t.DOWN_END,t.FREEZE,t.L_DAMAGE,t.PARALYSE,t.JUMP_START,t.JUMP_BODY,t.JUMP_END,t.ATTACK_START,t.ATTACK_BODY,t.ATTACK_END,t.SKILL_START,t.SKILL_BODY,t.CHARGE_START,t.CHARGE_BODY),t.flagMake(t.INVALID_FLAGS,t.CHARGE_START,t.DEAD,t.RESURRECT,t.STONE,t.DOWN,t.DOWN_END,t.FREEZE,t.L_DAMAGE,t.PARALYSE,t.JUMP_START,t.JUMP_END,t.ATTACK_START,t.ATTACK_BODY,t.SKILL_START,t.SKILL_BODY,t.CHARGE_START,t.CHARGE_BODY,t.SPECIAL1,t.SPECIAL2),t.flagMake(t.INVALID_FLAGS,t.CHARGE_BODY,t.JUMP_END),t.flagMake(t.INVALID_FLAGS,t.CURE,t.DEAD,t.RESURRECT),t.flagMake(t.INVALID_FLAGS,t.SPECIAL1,t.DEAD,t.RESURRECT,t.STONE,t.DOWN,t.FREEZE,t.PARALYSE,t.JUMP_BODY,t.ATTACK_BODY,t.SKILL_START,t.SKILL_BODY,t.CHARGE_BODY,t.SPECIAL1,t.SPECIAL2),t.flagMake(t.INVALID_FLAGS,t.SPECIAL2,t.DEAD,t.RESURRECT,t.STONE,t.DOWN,t.DOWN_END,t.FREEZE,t.L_DAMAGE,t.PARALYSE,t.JUMP_BODY,t.JUMP_END,t.ATTACK_BODY,t.SKILL_START,t.SKILL_BODY,t.CHARGE_BODY,t.SPECIAL1,t.SPECIAL2),t.flagMake(t.INVALID_FLAGS,t.BLOW,t.DEAD,t.RESURRECT,t.SPECIAL1),t.flagMake(t.INVALID_FLAGS,t.INVINC,t.DEAD,t.RESURRECT),t.flagMake(t.INVALID_FLAGS,t.IDLE,t.DEAD,t.RESURRECT,t.STONE,t.DOWN,t.DOWN_END,t.FREEZE,t.L_DAMAGE,t.PARALYSE,t.JUMP_START,t.JUMP_BODY,t.JUMP_END,t.ATTACK_START,t.ATTACK_BODY,t.ATTACK_END,t.SKILL_START,t.SKILL_BODY,t.GUARD,t.RUN,t.CHARGE_START,t.CHARGE_BODY,t.SPECIAL1,t.SPECIAL2),t.flagMake(t.INVALID_FLAGS,t.DAM_BLINK,t.DEAD,t.RESURRECT,t.SPECIAL1),t.flagMake(t.INVALID_FLAGS,t.TRACK,t.DEAD,t.RESURRECT,t.STONE,t.DOWN,t.DOWN_END,t.FREEZE,t.L_DAMAGE,t.PARALYSE,t.BLOW),t.flagMake(t.ERROR_FLAGS,t.DEAD),t.flagMake(t.ERROR_FLAGS,t.RESURRECT),t.flagMake(t.ERROR_FLAGS,t.STONE),t.flagMake(t.ERROR_FLAGS,t.DOWN),t.flagMake(t.ERROR_FLAGS,t.DOWN_END,t.DEAD,t.RESURRECT,t.STONE,t.DOWN_END,t.L_DAMAGE,t.JUMP_START,t.JUMP_BODY,t.JUMP_END,t.ATTACK_START,t.ATTACK_BODY,t.ATTACK_END,t.SKILL_START,t.SKILL_BODY,t.RUN,t.CHARGE_START,t.CHARGE_BODY,t.SPECIAL1,t.SPECIAL2,t.IDLE,t.DAM_BLINK),t.flagMake(t.ERROR_FLAGS,t.FREEZE),t.flagMake(t.ERROR_FLAGS,t.L_DAMAGE),t.flagMake(t.ERROR_FLAGS,t.PARALYSE),t.flagMake(t.ERROR_FLAGS,t.FIRE),t.flagMake(t.ERROR_FLAGS,t.POISON),t.flagMake(t.ERROR_FLAGS,t.JUMP_START),t.flagMake(t.ERROR_FLAGS,t.JUMP_BODY,t.DEAD,t.RESURRECT,t.STONE,t.DOWN,t.DOWN_END,t.FREEZE,t.L_DAMAGE,t.PARALYSE,t.JUMP_BODY,t.JUMP_END,t.ATTACK_START,t.SKILL_START,t.SKILL_BODY,t.GUARD,t.RUN,t.CHARGE_START,t.SPECIAL1),t.flagMake(t.ERROR_FLAGS,t.JUMP_END,t.DEAD,t.RESURRECT,t.STONE,t.DOWN,t.DOWN_END,t.L_DAMAGE,t.PARALYSE,t.JUMP_START,t.JUMP_END,t.ATTACK_START,t.SKILL_START,t.SKILL_BODY,t.GUARD,t.RUN,t.CHARGE_START,t.SPECIAL1),t.flagMake(t.ERROR_FLAGS,t.ATTACK_START),t.flagMake(t.ERROR_FLAGS,t.ATTACK_BODY,t.DEAD,t.RESURRECT,t.STONE,t.DOWN,t.DOWN_END,t.FREEZE,t.L_DAMAGE,t.PARALYSE,t.JUMP_START,t.ATTACK_BODY,t.ATTACK_END,t.SKILL_START,t.SKILL_BODY,t.GUARD,t.RUN,t.CHARGE_BODY,t.SPECIAL1,t.SPECIAL2),t.flagMake(t.ERROR_FLAGS,t.ATTACK_END,t.DEAD,t.RESURRECT,t.STONE,t.DOWN,t.DOWN_END,t.FREEZE,t.L_DAMAGE,t.PARALYSE,t.JUMP_START,t.ATTACK_START,t.ATTACK_END,t.SKILL_START,t.SKILL_BODY,t.GUARD,t.RUN,t.CHARGE_START,t.SPECIAL1,t.SPECIAL2),t.flagMake(t.ERROR_FLAGS,t.SKILL_START),t.flagMake(t.ERROR_FLAGS,t.SKILL_BODY,t.DEAD,t.RESURRECT,t.STONE,t.DOWN,t.DOWN_END,t.FREEZE,t.L_DAMAGE,t.PARALYSE,t.JUMP_START,t.JUMP_BODY,t.JUMP_END,t.ATTACK_START,t.ATTACK_BODY,t.ATTACK_END,t.SKILL_START,t.SKILL_BODY,t.GUARD,t.RUN,t.CHARGE_START,t.CHARGE_BODY,t.SPECIAL1,t.SPECIAL2),t.flagMake(t.ERROR_FLAGS,t.GUARD),t.flagMake(t.ERROR_FLAGS,t.RUN),t.flagMake(t.ERROR_FLAGS,t.CHARGE_START),t.flagMake(t.ERROR_FLAGS,t.CHARGE_BODY,t.DEAD,t.RESURRECT,t.STONE,t.DOWN,t.DOWN_END,t.FREEZE,t.L_DAMAGE,t.PARALYSE,t.JUMP_START,t.ATTACK_BODY,t.ATTACK_END,t.SKILL_START,t.SKILL_BODY,t.GUARD,t.RUN,t.CHARGE_BODY,t.SPECIAL1,t.SPECIAL2),t.flagMake(t.ERROR_FLAGS,t.CURE),t.flagMake(t.ERROR_FLAGS,t.SPECIAL1),t.flagMake(t.ERROR_FLAGS,t.SPECIAL2),t.flagMake(t.ERROR_FLAGS,t.BLOW),t.flagMake(t.ERROR_FLAGS,t.INVINC),t.flagMake(t.ERROR_FLAGS,t.IDLE),t.flagMake(t.ERROR_FLAGS,t.DAM_BLINK),t.flagMake(t.ERROR_FLAGS,t.TRACK))},t.DEAD=1,t.RESURRECT=2,t.STONE=4,t.DOWN=8,t.DOWN_END=16,t.FREEZE=32,t.L_DAMAGE=64,t.PARALYSE=128,t.FIRE=256,t.POISON=512,t.JUMP_START=1024,t.JUMP_BODY=2048,t.JUMP_END=4096,t.ATTACK_START=8192,t.ATTACK_BODY=16384,t.ATTACK_END=32768,t.SKILL_START=65536,t.SKILL_BODY=1<<17,t.GUARD=1<<18,t.RUN=1<<19,t.CHARGE_START=1<<20,t.CHARGE_BODY=1<<21,t.CURE=1<<22,t.SPECIAL1=1<<23,t.SPECIAL2=1<<24,t.BLOW=1<<25,t.INVINC=1<<26,t.IDLE=1<<27,t.DAM_BLINK=1<<28,t.TRACK=1<<29,t.JUMP_ALL=t.JUMP_START|t.JUMP_BODY|t.JUMP_END,t.ATTACK_ALL=t.ATTACK_START|t.ATTACK_BODY|t.ATTACK_END,t.CHARGE_ALL=t.CHARGE_START|t.CHARGE_BODY,t.FLAGS=[t.DEAD,t.RESURRECT,t.STONE,t.DOWN,t.DOWN_END,t.FREEZE,t.L_DAMAGE,t.PARALYSE,t.FIRE,t.POISON,t.JUMP_START,t.JUMP_BODY,t.JUMP_END,t.ATTACK_START,t.ATTACK_BODY,t.ATTACK_END,t.SKILL_START,t.SKILL_BODY,t.GUARD,t.RUN,t.CHARGE_START,t.CHARGE_BODY,t.CURE,t.SPECIAL1,t.SPECIAL2,t.BLOW,t.INVINC,t.IDLE,t.DAM_BLINK,t.TRACK],t.prototype.setStat=function(e){if(this.checkStat(t.getErrorFlag(e))){var i="Set Status Error:\n";i+='  Set "'+t.FLAG_NAME[t.getFlagID(e)]+'" to\n',i+="   Flags:\n",i+=this.getStatText(),cc.warn(i)}this.clearStat(t.getOWFlag(e)),this._Status=this._Status|e},t.prototype.isValid=function(e){return!this.checkStat(t.getInvalidFlag(e))},t.prototype.setStatMultiFlags=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var a=0;a<e.length;a++)this.setStat(e[a])},t.prototype.clearStat=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var a=0;a<e.length;a++)this._Status=this._Status&~e[a]},t.prototype.checkStat=function(t){return 0!=(t&this._Status)},t.prototype.checkStatAll=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var a=0;a<e.length;a++)e[a]=e[a]&this._Status,e[0]=e[0]*e[a];return 0!=e[0]},t.prototype.checkStatAny=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var a=0;a<e.length;a++)e[a]=e[a]&this._Status,e[0]=e[0]|e[a];return 0!=e[0]},t.prototype.getStatText=function(){for(var e="    NONE",i=0;i<t.FLAGS.length;i++)this.checkStat(t.FLAGS[i])&&("    NONE"==e&&(e=""),e+="    "+t.FLAG_NAME[i]+"\n");return e},t.prototype.initStatusFlag=function(){this._Status=0,t.initSubFlags()}},cc._RF.pop()},{}],CC_Hit:[function(t,e,i){"use strict";cc._RF.push(e,"d797bUEGENA9by+yz1M7xg/","CC_Hit"),e.export=function(t){hit_func=function(){cc.log("Player Hit")}},cc._RF.pop()},{}],"CM-SetCol":[function(t,e,i){"use strict";cc._RF.push(e,"a6d62ZbjEdJzpyMRCB2PAKR","CM-SetCol");var a=t("DebugUtils");e.exports=function(t){t.setBodyCollision=function(e,i,s,o){var n=void 0,_=void 0;return e==t.ENUM_PLAYER?(n=t.PlBodyCols[t.PLAYER_COL_NUM],_=cc.color(255,255,255,255),void 0==t.dbgPlBodyView[t.PLAYER_COL_NUM]?t.dbgPlBodyView[t.PLAYER_COL_NUM]=a.setCircleView(i,s,_):cc.warn("dbg XX BodyView が define 済み"),t.PLAYER_COL_NUM++):e==t.ENUM_DRAGON&&(n=t.EnBodyCols[t.ENEMY_COL_NUM],_=cc.color(0,255,0,255),void 0==t.dbgEnBodyView[t.ENEMY_COL_NUM]?t.dbgEnBodyView[t.ENEMY_COL_NUM]=a.setCircleView(i,s,_):cc.warn("dbg XX BodyView が define 済み"),t.ENEMY_COL_NUM++),n.setCBData(e,i,s,-1,o,-1,-1),n},t.setEnemyAtkCol=function(e,i,s,o,n,_,r){if(t.EnAtkCols[t.E_ATK_COL_NUM].setCBData(e,i,s,o,n,_,r),void 0==t.dbgEnAtkView[t.E_ATK_COL_NUM]){var c=cc.color(255,0,0,255);t.dbgEnAtkView[t.E_ATK_COL_NUM]=a.setCircleView(i,s,c)}else cc.warn("dbgEnAtkView が define 済み");return t.E_ATK_COL_NUM++,t.EnAtkCols[t.E_ATK_COL_NUM-1]},t.setPlayerAtkCol=function(e,i,s,o,n,_,r){if(t.PlAtkCols[t.P_ATK_COL_NUM].setCBData(e,r,s,-1,o,n,_),void 0==t.dbgPlAtkView[t.P_ATK_COL_NUM]){var c=cc.color(255,0,255,255);t.dbgPlAtkView[t.P_ATK_COL_NUM]=a.setCircleView(r,s,c)}else cc.warn("dbgPlAtkView が define 済み");return a.setCircleVisible(t.dbgPlAtkView[t.P_ATK_COL_NUM],!0),t.P_ATK_COL_NUM++,t.PlAtkCols[t.P_ATK_COL_NUM-1]}},cc._RF.pop()},{DebugUtils:"DebugUtils"}],CameraControl:[function(t,e,i){"use strict";cc._RF.push(e,"c6bc0A4bflEqYWUnUBHz43M","CameraControl"),cc.Class({extends:cc.Component,properties:{target:{default:null,type:cc.Node},camera:cc.Camera,anim:cc.Animation,jumpZoom:!1,centerAtStart:!1,smoothFollow:!1,followX:{default:0,visible:function(){return this.smoothFollow}},followY:{default:0,visible:function(){return this.smoothFollow}},minFollowDist:{default:0,visible:function(){return this.smoothFollow}},followRatio:{default:0,visible:function(){return this.smoothFollow}},overview:!1,overviewTargets:{default:[],type:[cc.Node],visible:function(){return this.overview}},overviewMargin:{default:0,visible:function(){return this.overview}},speedZoom:!1,zoomInSpeed:{default:0,visible:function(){return this.speedZoom}},zoomOutSpeed:{default:0,visible:function(){return this.speedZoom}},canShake:!1,shakeDuration:{default:0,visible:function(){return this.canShake}},pointerPan:!1,pointerXMult:{default:0,visible:function(){return this.pointerPan}},pointerYMult:{default:0,visible:function(){return this.pointerPan}},useBoundaries:!1,topBound:{default:0,visible:function(){return this.useBoundaries}},bottomBound:{default:0,visible:function(){return this.useBoundaries}},leftBound:{default:0,visible:function(){return this.useBoundaries}},rightBound:{default:0,visible:function(){return this.useBoundaries}}},onLoad:function(){this.startFollow=!1;var t=cc.find("Canvas").getComponent(cc.Canvas);this.visibleSize=cc.view.getVisibleSize(),this.initZoomRatio=this.camera.zoomRatio,this.centerAtStart&&(this.node.position=this.target.convertToWorldSpaceAR(cc.Vec2.ZERO)),this.previousPos=this.node.position,this.pointerPan&&(this.overview=!1,this.speedZoom=!1,t.node.on("mousemove",this.onMouseMove,this),t.node.on("touchmove",this.onTouchMove,this),this.pointerPos=null),this.overview&&(this.jumpZoom=!1,this.speedZoom=!1),this.speedZoom&&(this.jumpZoom=!1)},onEnable:function(){cc.director.getPhysicsManager().attachDebugDrawToCamera(this.camera)},onDisable:function(){cc.director.getPhysicsManager().detachDebugDrawFromCamera(this.camera)},lateUpdate:function(t){var e=void 0;if(e=this.overview?this.target.parent.convertToWorldSpaceAR(this.getOverviewTargetsMidpoint()):this.target.parent.convertToWorldSpaceAR(this.target.position),this.pointerPan&&this.pointerPos){var i=this.pointerPos.x/(this.visibleSize.width/2)-1,a=this.pointerPos.y/(this.visibleSize.height/2)-1;i*=this.pointerXMult,a*=this.pointerYMult,e=cc.pAdd(e,cc.p(i,a))}if(this.smoothFollow?((Math.abs(e.x-this.node.x)>=this.followX||Math.abs(e.y-this.node.y)>=this.followY)&&(this.startFollow=!0),this.startFollow&&(this.node.position=this.node.position.lerp(e,this.followRatio),cc.pDistance(e,this.node.position)<=this.minFollowDist&&(this.startFollow=!1))):this.node.position=this.node.parent.convertToNodeSpaceAR(e),this.speedZoom){var s=Math.abs(this.previousPos.x-e.x)/t,o=0;s>this.zoomOutSpeed?(o=1-(s-this.zoomOutSpeed)/(this.zoomInSpeed-this.zoomOutSpeed),this.camera.zoomRatio=cc.lerp(this.camera.zoomRatio,o,.02)):this.camera.zoomRatio=cc.lerp(this.camera.zoomRatio,this.initZoomRatio,.02)}if(this.previousPos=e,this.jumpZoom){var n=e.y/cc.winSize.height;this.camera.zoomRatio=1+.35*(.6-n)}if(this.useBoundaries){var _=this.visibleSize.width/2/this.camera.zoomRatio,r=this.visibleSize.height/2/this.camera.zoomRatio,c=this.node.x-_,h=this.node.x+_,A=this.node.y-r,l=this.node.y+r;c<this.leftBound&&(this.node.x=this.leftBound+_),A<this.bottomBound&&(this.node.y=this.bottomBound+r),h>this.rightBound&&(this.node.x=this.rightBound-_),l>this.topBound&&(this.node.y=this.topBound-r)}},getOverviewTargetsMidpoint:function(){for(var t=cc.p(0,0),e=99999,i=99999,a=-99999,s=-99999,o=0;o<this.overviewTargets.length;++o){var n=this.overviewTargets[o];a=n.x>a?n.x:a,e=n.x<e?n.x:e,s=n.y>s?n.y:s,i=n.y<i?n.y:i}a+=this.overviewMargin,e-=this.overviewMargin,s+=this.overviewMargin,i-=this.overviewMargin;var _=Math.abs(a-e),r=Math.abs(s-i);t=cc.p(e+_/2,i+r/2);var c=Math.max(_/this.visibleSize.width,r/this.visibleSize.height);return this.camera.zoomRatio=1/c,t},shakeCamera:function(){this.canShake&&(this.anim.play("shake"),this.scheduleOnce(this.stopShake.bind(this),this.shakeDuration))},stopShake:function(){this.anim.stop(),this.camera.node.position=cc.p(0,0)},onMouseMove:function(t){this.pointerPos=t.getLocation()},onTouchMove:function(t){this.pointerPos=t.getLocation()}}),cc._RF.pop()},{}],"Char-Container":[function(t,e,i){"use strict";cc._RF.push(e,"edd84a3plNHSLKrHUhHLe16","Char-Container"),cc.Class({extends:cc.Component,properties:{LifeGauge:cc.Prefab,Attack:cc.Prefab,Sprite:cc.SpriteFrame,Animation:cc.AnimationClip}}),cc._RF.pop()},{}],CharacterBase:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}cc._RF.push(e,"2146af33bJD94W4MQhu+1b/","CharacterBase");var s,o,n=(o=s=function t(e,i,s,o){a(this,t),this.update=function(t){this._DEBUG_VIEW_FLAG||(this.Control(t),this.damage_check(t),this.Jump(t),this.Attack(t),this.Move(t),this.Animation(),this.LIFE_GAUGE_COMP.update(t),this.StageUpdate(),this.ATTACK_NODE.setPositionY(this._CHARACTER_NODE.getPositionY()),this.ATTACK_NODE.scaleX=this._CHARACTER_NODE.scaleX)},this.BODY_RADIUS=12,cc.log("        ***** CB Constructor:"+e+" ****"),this._TYPE=e,this.initCharParam(),this.initViewObjects(i,s,o),t.CM.setBodyCollision(t.CM.ENUM_PLAYER,this._BASE_NODE,this.BODY_RADIUS,this),this.initStatusFlag(),this.InitAnimation(),this.InitMove(),this.InitAtack(),this.InitControl(),this.InitJump(),this.InitDamage(),this.InitStage(),this._DEBUG_VIEW_FLAG=!1},s.DIRECT_NONE=0,s.DIRECT_UP=1,s.DirString=["NONE","U","LU","L","LD","D","RD","R","RU"],o);t("CB-Init")(n),t("CB-Status")(n),t("CB-Move")(n),t("CB-Attack")(n),t("CB-Atk-c00")(n),t("CB-Atk-c01")(n),t("CB-Damage")(n),t("CB-Jump")(n),t("CB-Animation")(n),t("CB-Control")(n),t("CB-Callback")(n),t("CB-Stage")(n),e.exports=n,cc._RF.pop()},{"CB-Animation":"CB-Animation","CB-Atk-c00":"CB-Atk-c00","CB-Atk-c01":"CB-Atk-c01","CB-Attack":"CB-Attack","CB-Callback":"CB-Callback","CB-Control":"CB-Control","CB-Damage":"CB-Damage","CB-Init":"CB-Init","CB-Jump":"CB-Jump","CB-Move":"CB-Move","CB-Stage":"CB-Stage","CB-Status":"CB-Status"}],CharacterManager:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}cc._RF.push(e,"a7536cJUzJNDIXQTJwjMknA","CharacterManager");var s,o,n=t("CharacterBase"),_=(o=s=function t(e,i,s,o,_,r){a(this,t),cc.log("     **** Character Manager Constructor: "+e+" ****"),t.CharNum=e,n.GM=cc.director.getScene().getChildByName("Canvas").getComponent("GameManager").GM_CLASS,n.CM=n.GM.COLLISION_MANAGER,n.AM=n.GM.ATTACK_MANAGER,n.STAGE_BASE=n.GM.STAGE_BASE,t._CharBase=[];for(var c=void 0,h=void 0,A=0;A<e;A++){switch(i[A].Type){case 0:c="c00",h=s;break;case 1:c="c01",h=o;break;case 2:c="HvyA",h=_;break;default:cc.assert(!1,"CharType Error")}t._CharBase[A]=new n(c,h,i[A].Position,r)}n.GM.registTargetPlayer(t._CharBase[0]._BASE_NODE.position),n.GM.setCameraTarget(t._CharBase[0]),n.TargetNum=0},s.fixedUpdate=function(t){for(var e=0;e<_.CharNum;e++)_._CharBase[e].update(t)},s.debugResurect=function(){cc.log("Resurect");for(var t=0;t<_.CharNum;t++)_._CharBase[t].Life=_._CharBase[t].LIFE_POINT_MAX,_._CharBase[t].clearStat(n.DEAD),_._CharBase[t].ANIM_CHANGE_FLAG=!0,_._CharBase[t].LIFE_GAUGE_COMP.set_life(1)},s.nextCameraTarget=function(){n.TargetNum++,n.TargetNum>=_._CharBase.length&&(n.TargetNum=0),n.GM.registTargetPlayer(_._CharBase[n.TargetNum]._BASE_NODE.position),n.GM.setCameraTarget(_._CharBase[n.TargetNum]),cc.log("Next Camera Target")},s.prevCameraTarget=function(){n.TargetNum--,n.TargetNum<0&&(n.TargetNum=_._CharBase.length-1),n.GM.registTargetPlayer(_._CharBase[n.TargetNum]._BASE_NODE.position),n.GM.setCameraTarget(_._CharBase[n.TargetNum]),cc.log("Previous Camera Target")},o);e.exports=_,cc._RF.pop()},{CharacterBase:"CharacterBase"}],CharacterView:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}cc._RF.push(e,"939108QaoRPU6H554s+UvGJ","CharacterView");var n=t("DebugViewBase"),_=function(t){function e(){a(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.GetView=function(){this.clear_label();for(var t=0;t<this.CHAR_M.CharNum;t++){this.add_label("CHARACTER 0"+t,"");for(var e="",i=this.CHAR_M._CharBase[t].constructor,a=0;a<i.FLAGS.length;a++)this.CHAR_M._CharBase[t].checkStatAll(i.FLAGS[a])&&(e+=i.FLAG_NAME[a]+", ");this.set_indent(!0),this.add_label("DISTANCE ",this.CHAR_M._CharBase[t].DISTANCE),this.add_label("ANGLE ",this.CHAR_M._CharBase[t].ANGLE),this.add_label("ANGLE C",this.CHAR_M._CharBase[t].angleC),this.add_label("DIREC C",this.CHAR_M._CharBase[t].dirC),this.add_label("STATUS ",e),this.add_label("AttackCombo Num ",this.CHAR_M._CharBase[t].atk_combo_num),this.add_label("GaugeCombo Num",this.CHAR_M._CharBase[t].gauge_combo_num),this.add_label("Combo end time",this.CHAR_M._CharBase[t].combo_continue_timer.toFixed(2)),this.add_enter(),this.add_label("Charge Time",this.CHAR_M._CharBase[t].charge_timer.toFixed(2)),this.add_label("Attack Timer",this.CHAR_M._CharBase[t].attack_timer.toFixed(2)),this.add_label("TappedBuffer    ",this.CHAR_M._CharBase[t].tappedBuffer),this.add_label("TappedTimer    ",this.CHAR_M._CharBase[t].tappedTimer),this.add_label("FlickedTimer    ",this.CHAR_M._CharBase[t].flickedTimer),this.add_label("Tapped",this.CHAR_M._CharBase[t].tapped),this.add_label("Flicked",this.CHAR_M._CharBase[t].flicked),this.add_label("Touch ",this.CHAR_M._CharBase[t].touch),this.add_enter(),this.add_label("MoveSpeed",this.CHAR_M._CharBase[t].moveSpeed+": "+this.CHAR_M._CharBase[t].moveSpeed.mag()),this.add_label("MoveSpeedOld",this.CHAR_M._CharBase[t].moveSpeedOld+": "+this.CHAR_M._CharBase[t].moveSpeedOld.mag()),this.add_label("BlowSpeed",this.CHAR_M._CharBase[t].blowSpeed),this.add_enter(),this.add_label("BasePosition",this.CHAR_M._CharBase[t]._BASE_NODE.getPosition()),this.add_label("CharPosition",this.CHAR_M._CharBase[t]._CHARACTER_NODE.getPosition()),this.add_enter(),this.add_label("ANIM CHANGE FLAG ",this.CHAR_M._CharBase[t].ANIM_CHANGE_FLAG),this.add_label("nowDirection",this.CHAR_M._CharBase[t].nowDirection),this.add_label("Char Direct Now",this.CHAR_M._CharBase[t]._CHAR_DIRECTION);this.CHAR_M._CharBase[t]._CHAR_DIRECTION;this.add_label("Char Direct Old",this.CHAR_M._CharBase[t]._CHAR_DIRECTION_OLD),this.add_enter(),this.add_label("Jump Timer   ",this.CHAR_M._CharBase[t]._jumpTimer.toFixed(2)),this.add_label("Jump Power   ",this.CHAR_M._CharBase[t]._jump_power.toFixed(2)),this.add_label("Jump Height   ",this.CHAR_M._CharBase[t].jumpHeight.toFixed(2)),this.set_indent(!1)}return this.get_label()},t.GM=cc.director.getScene().getChildByName("Canvas").getComponent("GameManager").GM_CLASS,t.CHAR_M=t.GM.CHARACTER_MANAGER,t}return o(e,n),e}();e.exports=_,cc._RF.pop()},{DebugViewBase:"DebugViewBase"}],CircleView:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}cc._RF.push(e,"c03bdfZJhBCOYzxhxsQhX6n","CircleView");var n=t("DebugViewBase"),_=function(t){function e(){a(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.GetView=function(){var t="";t+="[Player Body]\n";for(var e=0;e<this.CM.PLAYER_COL_NUM;e++)t+="    "+this.CM.dbgPlBodyView[e]._sgNode.opacity+"\n";t+="[Enemy Body]\n";for(var i=0;i<this.CM.ENEMY_COL_NUM;i++)t+="    "+this.CM.dbgEnBodyView[i]._sgNode.opacity+"\n";t+="[E Attack]:  "+this.CM.E_ATK_COL_NUM+" / "+this.CM.EnAtkCols.length+"\n";for(var a=0;a<this.CM.E_ATK_COL_NUM;a++)t+="    "+this.CM.dbgEnAtkView[a]._sgNode.opacity+"\n";t+="[P Attack]:  "+this.CM.P_ATK_COL_NUM+" / "+this.CM.PlAtkCols.length+"\n";for(var s=0;s<this.CM.P_ATK_COL_NUM;s++)t+="    "+this.CM.dbgPlAtkView[s]._sgNode.opacity+"\n";return t},t.GM=cc.director.getScene().getChildByName("Canvas").getComponent("GameManager").GM_CLASS,t.CM=t.GM.COLLISION_MANAGER,t}return o(e,n),e}();e.exports=_,cc._RF.pop()},{DebugViewBase:"DebugViewBase"}],CollisionBase:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}cc._RF.push(e,"febafOE5f1B2p3jOmLHhKwK","CollisionBase"),Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}();i.CollisionBase=function(){function t(e,i){a(this,t),this.CM=null,this.ColID=i,this.Type=e,this.ParentNode=null,this.Radius=-1,this.damage=-1,this.callBackObj=null,this.startTime=-1,this.endTime=-1,this.isHit=!1,this.active=!1}return s(t,[{key:"setCBData",value:function(t,e,i,a,s,o,n){this.Type=t,this.ParentNode=e,this.Radius=i,this.damage=a,this.callBackObj=s,this.startTime=o,this.endTime=n,this.isHit=!1,this.active=!0}},{key:"Start_DBG_View",value:function(){}}],[{key:"ColisionManager",value:function(){return this.CM,this.ColisionManager}}]),t}();cc._RF.pop()},{}],CollisionManager:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}cc._RF.push(e,"95b23ecLL5L74EHb4/yoVFO","CollisionManager");var s,o,n=t("./CollisionBase"),_=(o=s=function t(e,i,s,o){a(this,t),cc.log("      **** Collision Manager Constructor ****"),t.E_ATK_COL_MAX=e,t.P_ATK_COL_MAX=i,t.PLAYER_COL_MAX=s,t.ENEMY_COL_MAX=o,t.EnAtkCols=[],t.PlAtkCols=[],t.EnBodyCols=[],t.PlBodyCols=[],t.dbgEnAtkView=[],t.dbgPlAtkView=[],t.dbgEnBodyView=[],t.dbgPlBodyView=[],t.P_ATK_COL_NUM=0,t.E_ATK_COL_NUM=0,t.PLAYER_COL_NUM=0,t.ENEMY_COL_NUM=0,cc.log("      Init EnAtkCols :"+e);for(var _=0;_<e;_++)t.EnAtkCols[_]=new n.CollisionBase(t.ENUM_ENEMY,_);cc.log("      Init PlAtkCols :"+i);for(var r=0;r<i;r++)t.PlAtkCols[r]=new n.CollisionBase(t.ENUM_PL_ATK,r);cc.log("      Init EnBodyCols :"+o);for(var c=0;c<o;c++)t.EnBodyCols[c]=new n.CollisionBase(t.ENUM_PLAYER,c);cc.log("      Init PlBodyCols :"+s);for(var h=0;h<s;h++)t.PlBodyCols[h]=new n.CollisionBase(t.ENUM_PLAYER,h)},s.ENUM_PLAYER=0,s.ENUM_DRAGON=1,s.ENUM_PL_ATK=2,s.ENUM_EN_ATK=3,s.invincible=!1,s.removeEAtkCol=function(t){_.EnAtkCols[t].active=!1;var e=_.EnAtkCols[t];_.EnAtkCols[t]=_.EnAtkCols[_.E_ATK_COL_NUM-1],_.EnAtkCols[_.E_ATK_COL_NUM-1]=e;var i=_.EnAtkCols[t].ColID;_.EnAtkCols[t].ColID=_.EnAtkCols[_.E_ATK_COL_NUM-1].ColID,_.EnAtkCols[_.E_ATK_COL_NUM-1].ColID=i;var a=_.dbgEnAtkView[t];_.dbgEnAtkView[t]=_.dbgEnAtkView[_.E_ATK_COL_NUM-1],_.dbgEnAtkView[_.E_ATK_COL_NUM-1]=a,_.dbgEnAtkView[_.E_ATK_COL_NUM-1].removeFromParent(),_.dbgEnAtkView[_.E_ATK_COL_NUM-1]=void 0,_.E_ATK_COL_NUM--},s.removePAtkCol=function(t){_.PlAtkCols[t].active=!1;var e=_.PlAtkCols[t];_.PlAtkCols[t]=_.PlAtkCols[_.P_ATK_COL_NUM-1],_.PlAtkCols[_.P_ATK_COL_NUM-1]=e;var i=_.PlAtkCols[t].ColID;_.PlAtkCols[t].ColID=_.PlAtkCols[_.P_ATK_COL_NUM-1].ColID,_.PlAtkCols[_.P_ATK_COL_NUM-1].ColID=i;var a=_.dbgPlAtkView[t];_.dbgPlAtkView[t]=_.dbgPlAtkView[_.P_ATK_COL_NUM-1],_.dbgPlAtkView[_.P_ATK_COL_NUM-1]=a,_.dbgPlAtkView[_.P_ATK_COL_NUM-1].removeFromParent(),_.dbgPlAtkView[_.P_ATK_COL_NUM-1]=void 0,_.P_ATK_COL_NUM--},s.dist=new cc.Vec2(0,0),s.updateCM=function(t){for(var e=void 0,i=0;i<_.P_ATK_COL_NUM;i++)e=t,_.PlAtkCols[i].startTime>0&&(_.PlAtkCols[i].startTime-=e,_.PlAtkCols[i].startTime<=0&&(e=-_.PlAtkCols[i].startTime,_.PlAtkCols[i].startTime=0)),0==_.PlAtkCols[i].startTime&&_.PlAtkCols[i].endTime>0&&(_.PlAtkCols[i].endTime-=e,_.PlAtkCols[i].endTime<=0&&_.removePAtkCol(i));for(var a=0;a<_.PLAYER_COL_NUM;a++){_.pPos=_.PlBodyCols[a].ParentNode.position;for(var s=0;s<_.ENEMY_COL_NUM;s++)_.radius=_.EnBodyCols[s].Radius+_.PlBodyCols[a].Radius,_.hitPos=_.EnBodyCols[s].ParentNode.position,_.dist.set(_.pPos.sub(_.hitPos)),_.dist.magSqr()<_.radius*_.radius&&(cc.log("\n  Dragon Head Hit  -"+_.dist.magSqr()+"  -  "+_.radius*_.radius),_.PlBodyCols[a].callBackObj.bodyHit(_.hitPos,_.EnBodyCols[s].Radius))}for(var o=0;o<_.ENEMY_COL_NUM;o++){_.pPos=_.EnBodyCols[o].ParentNode.position;for(var n=0;n<_.P_ATK_COL_NUM;n++)_.radius=_.PlAtkCols[n].Radius+_.EnBodyCols[o].Radius,_.hitPos=_.PlAtkCols[n].ParentNode.position,_.dist.set(_.pPos.sub(_.hitPos)),_.dist.magSqr()<_.radius*_.radius&&(_.PlAtkCols[n].callBackObj.hit_callback_AB(n),_.EnBodyCols[o].callBackObj.hit_callback(o),cc.log("Player Attack Hit"))}if(!_.invincible)for(var r=0;r<_.PLAYER_COL_NUM;r++){_.pPos=_.PlBodyCols[r].ParentNode.position;for(var c=0;c<_.E_ATK_COL_NUM;c++)_.radius=_.EnAtkCols[c].Radius+_.PlBodyCols[r].Radius,_.hitPos=_.EnAtkCols[c].ParentNode.position,_.dist.set(_.pPos.sub(_.hitPos)),_.dist.magSqr()<_.radius*_.radius&&_.PlBodyCols[r].callBackObj.is_hit()&&(_.PlBodyCols[r].callBackObj.damageCharacter(_.EnAtkCols[c].damage,_.EnAtkCols[c].callBackObj.getBlowSpeed()),_.EnAtkCols[c].callBackObj.hit_callback_AB(c),_.EnAtkCols[c].isHit=!0)}},s.setInvincible=function(){_.invincible?_.invincible=!1:_.invincible=!0,cc.log("Change Invincible ="+_.invincible)},o);t("CM-SetCol")(_),e.exports=_,cc._RF.pop()},{"./CollisionBase":"CollisionBase","CM-SetCol":"CM-SetCol"}],CollisionView:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}cc._RF.push(e,"bc26f9/4PdLQr+0TgHQwqm/","CollisionView");var n=t("DebugViewBase"),_=function(t){function e(){a(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.GetView=function(){var t="";t+="[Player Body]\n";for(var e=0;e<this.CM.PLAYER_COL_NUM;e++){var i=new cc.Vec2;i.set(this.CM.PlBodyCols[e].ParentNode.position),t+="        ",t+=e+": "+i+"Rad:"+this.CM.PlBodyCols[e].Radius+"\n"}t+="[Enemy Body]\n";for(var a=0;a<this.CM.EnBodyCols.length;a++){var s=new cc.Vec2;0==this.CM.EnBodyCols[a].active?(t+="        ",t+=a+": ColID:"+this.CM.EnBodyCols[a].ColID,t+="  non active\n"):(s.set(this.CM.EnBodyCols[a].ParentNode.position),t+="        ",t+=a+": "+s+"Rad:"+this.CM.EnBodyCols[a].Radius+"\n")}t+="[E Attack]:  "+this.CM.E_ATK_COL_NUM+" / "+this.CM.EnAtkCols.length+"\n";var o=new cc.Vec2;o.set(this.CM.PlBodyCols[0].ParentNode.position),t+="    ",t+="loop:ColID  ",t+="Rad  ",t+="HIT          ",t+="BlowSpd                          ",t+="Pos                  ",t+="Dist\n";for(var n=0;n<this.CM.EnAtkCols.length;n++)if(t+="      ",t+=this.get2Digit(n)+"  :  ",t+=this.get2Digit(this.CM.EnAtkCols[n].ColID)+"  :  ",0==this.CM.EnAtkCols[n].active)t+="  non active\n";else{t+=this.get2Digit(this.CM.EnAtkCols[n].Radius)+" : ",this.CM.EnAtkCols[n].isHit?t+=" HIT   :  ":t+="  -    :  ",t+=this.CM.EnAtkCols[n].callBackObj.getBlowSpeed()+"    :    ";var _=this.CM.EnAtkCols[n].ParentNode.position;t+=_+"   :   ",t+=o.sub(_).magSqr().toFixed(0)+"\n"}t+="[P Attack]:  "+this.CM.P_ATK_COL_NUM+" / "+this.CM.PlAtkCols.length+"\n";for(var r=0;r<this.CM.PlAtkCols.length;r++)if(0==this.CM.PlAtkCols[r].active)t+="        ",t+=r+": ColID:"+this.CM.PlAtkCols[r].ColID,t+="  non active\n";else{var c=this.CM.PlAtkCols[r].ParentNode.position;t+="        ",t+=r+": ColID:"+this.CM.PlAtkCols[r].ColID,this.CM.PlAtkCols[r].isHit?t+=": HIT ":t+=":  -  ",t+=" "+c+" : ",t+="S:"+this.CM.PlAtkCols[r].startTime.toFixed(2),t+="  E: "+this.CM.PlAtkCols[r].endTime.toFixed(2)+"\n"}return t},t.GM=cc.director.getScene().getChildByName("Canvas").getComponent("GameManager").GM_CLASS,t.CM=t.GM.COLLISION_MANAGER,t}return o(e,n),e}();e.exports=_,cc._RF.pop()},{DebugViewBase:"DebugViewBase"}],ControlData:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}cc._RF.push(e,"56668ATINtAaoZpSZyb7HB8","ControlData"),Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}();i.ControlData=function(){function t(){a(this,t),this.Dir=t.NONE,this.Tapped=!1,this.Flicked=!1,this.Touch=!1}return s(t,[{key:"setTapped",value:function(t){this.Tapped=t}},{key:"setFlicked",value:function(t){this.Flicked=t}}],[{key:"NONE",get:function(){return 0}},{key:"U",get:function(){return 1}},{key:"LU",get:function(){return 2}},{key:"L",get:function(){return 3}},{key:"LD",get:function(){return 4}},{key:"D",get:function(){return 5}},{key:"RD",get:function(){return 6}},{key:"R",get:function(){return 7}},{key:"RU",get:function(){return 8}}]),t}();cc._RF.pop()},{}],DamageLabel:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}cc._RF.push(e,"51321bElwJAu5/NQoVanhub","DamageLabel");var s=function t(){a(this,t),this.createLabels=function(t,e){for(var i=0;i<e.toString(10).length;i++){new cc.Node("DamageLabel");var a=this.node.addComponent(cc.Label);create(e[i],"fonts/babarageo3.ttf",10),a.setTag(i)}}};cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.log("DamLabel Test");cc.log(1554..toString(10)),(new s).createLabels(this.node.getPosition(),1554)},start:function(){}}),cc._RF.pop()},{}],DebugLifeGauge:[function(t,e,i){"use strict";cc._RF.push(e,"f83e7/Z5rdJ7ZMhht8vU9lC","DebugLifeGauge");var a=t("LifeGauge");cc.Class({extends:cc.Component,properties:{lgauge_node:cc.Node},onLoad:function(){this.LIFE_GAUGE=new a(this,this.lgauge_node)},Debug_life_slider:function(t,e){this.LIFE_GAUGE.Debug_life_slider(t,e)},Debug_combo_set:function(){this.LIFE_GAUGE.Debug_combo_set()},Debug_gauge_slider:function(t,e){this.LIFE_GAUGE.Debug_gauge_slider(t,e)}}),cc._RF.pop()},{LifeGauge:"LifeGauge"}],DebugMenu:[function(t,e,i){"use strict";cc._RF.push(e,"aebdbJvt6FNRp9FOWDC6kn4","DebugMenu");var a=t("InputManagerView"),s=t("CharacterView"),o=t("AnimationView"),n=t("CollisionView"),_=t("RecordView"),r=t("SaveLoadView"),c=t("DragonDBGView"),h=t("StageBaseView"),A=t("AttackManagerView"),l=t("CircleView"),u=cc.Enum({InputManager:0,Character:1,Animation:2,Collision:3,Record:4,SaveLoad:5,Dragon:6,StageBase:7,AttackManager:8,CollisionCircle:9}),E=["InputManager","Character","Animation","Collision","Record Manager","SaveLoad","Dragon","Stage Base","Attack Manager","Collision Circle"],d=[a,s,o,n,_,r,c,h,A,l],g=cc.Class({name:"DebugMenuItem",properties:{NameID:{default:u.InputManager,type:u},Flag:!1,_classViewFunc:null}});cc.Class({extends:cc.Component,properties:{DebugItems:{default:[],type:[g]},_Label:null,_Is_Open:!1},menu_is_open:function(){return this._Is_Open},menu_set_open:function(){this._Is_Open=!0},menu_set_close:function(){this._Is_Open=!1},onLoad:function(){this._Label=this.node.getComponent(cc.Label);var t=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:this.onTouchBegan});cc.eventManager.addListener(t,this.node);for(var e=0;e<this.DebugItems.length;e++)this.DebugItems[e]._classViewFunc=new d[this.DebugItems[e].NameID];var i=new cc.Node("InfoLabelNode");i.setPosition(0,1800),i.anchorX=0,i.anchorY=1,i.parent=this.node,this._InfoLabel=i.addComponent(cc.Label),this._InfoLabel.string="Test Label",this._InfoLabel.fontSize=25,this._InfoLabel.lineHeight=25,this._InfoLabel.horizontalAlign=cc.Label.HorizontalAlign.LEFT,this._InfoLabel.verticalAlign=cc.Label.VerticalAlign.TOP},onTouchBegan:function(t,e){var i=e.getCurrentTarget().getComponent("DebugMenu"),a=i.node.getContentSize().width,s=i.node.getContentSize().height,o=t.getLocation().x,n=t.getLocation().y-i.node.getPosition().y;if(o>a||n>s)return!1;if(cc.log("In menu touch OpenFlag:"+i.menu_is_open()),i.menu_is_open()){var _=Math.floor(n/(s/(i.DebugItems.length+1)));_=i.DebugItems.length-_,cc.log("ItemNum: %d",i.DebugItems.length),0==_?i.menu_set_close():i.DebugItems[_-1].Flag?i.DebugItems[_-1].Flag=!1:i.DebugItems[_-1].Flag=!0}else i.menu_set_open();return!0},update:function(t){switch(this.menu_is_open()){case!1:this._Label.string="Debug(Open)";break;case!0:var e="";e="Debug(Close): ";for(var i=0;i<this.DebugItems.length;i++)e=e+"\n"+E[this.DebugItems[i].NameID]+": ",this.DebugItems[i].Flag?e+="ON":e+="OFF";this._Label.string=e}for(var a="",s=0;s<this.DebugItems.length;s++)this.DebugItems[s].Flag&&(a+=E[this.DebugItems[s].NameID]+"\n",a+=this.DebugItems[s]._classViewFunc.GetView());this._InfoLabel.string=a}}),cc._RF.pop()},{AnimationView:"AnimationView",AttackManagerView:"AttackManagerView",CharacterView:"CharacterView",CircleView:"CircleView",CollisionView:"CollisionView",DragonDBGView:"DragonDBGView",InputManagerView:"InputManagerView",RecordView:"RecordView",SaveLoadView:"SaveLoadView",StageBaseView:"StageBaseView"}],DebugUtils:[function(t,e,i){"use strict";cc._RF.push(e,"7b81eiDoeJOlYgNTOtaufYI","DebugUtils"),e.exports={setCircleView:function(t,e,i){var a=new cc.Node,s=new cc.DrawNode;return s.drawCircle(cc.v2(0,0),2*e/3,0,12,!1,3,i),a._sgNode.addChild(s),a.parent=t,a},setCirclePosition:function(t,e){t._sgNode.setPosition(e)},setCircleVisible:function(t,e){t._sgNode.setVisible(e)},getCircleVisible:function(t){return t._sgNode.getVisible()},setCircleRadius:function(t,e){}},cc._RF.pop()},{}],DebugViewBase:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}cc._RF.push(e,"dabd6JyKHBM7bgnkiuv3K8a","DebugViewBase");var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),o=function(){function t(){a(this,t),this.clear_label=function(){this._LABEL=""},this.set_indent=function(t){this.indent=t},this.add_label=function(t,e){1==this.indent&&(this._LABEL+="     "),this._LABEL+="     "+t+": ",this._LABEL+=e+"\n"},this.add_enter=function(){this._LABEL+="\n"},this.add_line=function(){this._LABEL+="     ------------------\n"},this.add_=function(t,e){this._LABEL+="     "+t+": ",this._LABEL+=e+"\n"},this.get_label=function(){return this._LABEL},this._LABEL="",this.GM=cc.director.getScene().getChildByName("Canvas").getComponent("GameManager").GM_CLASS}return s(t,[{key:"get2Digit",value:function(t){return("0"+t).slice(-2)}},{key:"getIntVec2",value:function(t){return"("+Math.round(t.x)+", "+Math.round(t.y)+")"}}]),t}();e.exports=o,cc._RF.pop()},{}],Debug_MA_Change:[function(t,e,i){"use strict";cc._RF.push(e,"e8d2eUDvelFTJuEdY/TOOPB","Debug_MA_Change"),cc.Class({extends:cc.Component,properties:{_MA:cc.Component,_Label:cc.Label},onLoad:function(){var t=cc.director.getScene();this._MA=t.getChildByName("MultiArticulate").getComponent("MultiArticulate"),cc.assert(null!=this._MA,"MultiArticulate が Sceneにいないよ！"),this._Label=this.getComponent("cc.Label")},Toggle_func:function(t,e){this._MA.toggle_swing(),cc.log(e)},Change_swing_speed:function(t,e){this._MA.set_swing_speed(500+6500*t.progress)},Change_swing_width_btm:function(t,e){this._MA.set_swing_width_btm(2*t.progress)},Change_swing_width_tip:function(t,e){this._MA.set_swing_width_tip(2*t.progress)},Change_swing_delay:function(t,e){this._MA.set_swing_delay(3e4*t.progress-15e3)},Change_swing_dist:function(t,e){this._MA.set_swing_length(10+150*t.progress)},Change_swing_size:function(t,e){this._MA.set_swing_size(.5+2*t.progress)},update:function(t){var e="スイング\n\n";e+=" - Speed: "+Math.floor(this._MA._swing_speed)+"\n\n",e+=" -幅 根本: "+this._MA._swing_width_btm.toFixed(2),e+="　　　　　 　　先端: "+this._MA._swing_width_tip.toFixed(2)+"\n\n",e+=" -遅延: "+Math.round(this._MA._swing_delay)+"\n\n",e+=" -長さ: "+this._MA._length.toFixed(2),e+="　　　　　 　　 大きさ: "+this._MA._swing_size.toFixed(1)+"\n\n",this._Label.string=e}}),cc._RF.pop()},{}],Debug_MA_View:[function(t,e,i){"use strict";cc._RF.push(e,"e8b3cFWIkNEaKFTFAqwR/H8","Debug_MA_View"),cc.Class({extends:cc.Component,properties:{_Label:cc.Label,_MA:cc.Component,_Target:null,FireSprite:cc.SpriteFrame,CircleSprite:cc.SpriteFrame,Dragon_Head:cc.SpriteFrame,Dragon_Neck:cc.SpriteFrame},onLoad:function(){var t=cc.director.getScene();this._MA=t.getChildByName("MultiArticulate").getComponent("MultiArticulate"),cc.assert(null!=this._MA,"MultiArticulate が Sceneにいないよ！"),this._Label=this.getComponent("cc.Label")},get_target_pos:function(){return null==this._Target&&(this._Target=this._MA.Target),this._Target.getPosition()},init_sprits:function(){this.SpritsNode=new Array;var t=cc.director.getScene();cc.log("デバッグ表示用のSpritsNode 作成");for(var e=0;e<this._MA.JOINT_DATA_NUM;e++)this.SpritsNode[e]=new cc.Node("child_"+e),this.SpritsNode[e].addComponent(cc.Sprite).spriteFrame=this.FireSprite,t.addChild(this.SpritsNode[e]);this.change_view("Dragon")},change_view:function(t){if("Dragon"==t)for(var e=0;e<this._MA.JOINT_DATA_NUM;e++)e==this._MA.JOINT_DATA_NUM-1?this.SpritsNode[e].getComponent(cc.Sprite).spriteFrame=this.Dragon_Head:this.SpritsNode[e].getComponent(cc.Sprite).spriteFrame=this.Dragon_Neck},update:function(t){var e="Target Pos "+this.get_target_pos()+"\n";e+="Joint Data: "+this._MA.JOINT_DATA_NUM,e+="  View: "+this._MA.JOINT_DATA_NUM,e+="  Time: "+this._MA._timer+"\n",e+=this._MA.DBG_Get_joint_info(),this._Label.string=e,null==this.SpritsNode&&this.init_sprits();for(var i=0,a=0;a<this._MA._VIEW_JOINT_NUM;a++)this.SpritsNode[a].setScale(this._MA._swing_size),this.SpritsNode[a].setPosition(this._MA.Position[a]),i+=this._MA.view_rot[a],a==this._MA._VIEW_JOINT_NUM-1?this.SpritsNode[a].rotation=180*-this._MA.view_rot[a]/Math.PI-90:this.SpritsNode[a].rotation=180*-i/Math.PI-90}}),cc._RF.pop()},{}],Debug_TargetMove:[function(t,e,i){"use strict";cc._RF.push(e,"527d1VRVMFHhq7m0d6FsT+W","Debug_TargetMove"),cc.Class({extends:cc.Component,properties:{Target:{default:null,type:cc.Node}},onLoad:function(){cc.log("Target init"),this._sprite=this.node.getComponent("cc.Sprite"),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){this.input_move(t)},this),this.node.on(cc.Node.EventType.TOUCH_START,function(t){this.touch_start(t)},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){this.touch_end(t)},this),this.node.on(cc.Node.EventType.TOUCH_END,function(t){this.touch_end(t)},this)},input_move:function(t){this.Target.setPosition(t.getLocation())},touch_start:function(t){this.Target.setPosition(t.getLocation())},touch_end:function(t){}}),cc._RF.pop()},{}],DragonBase:[function(t,e,i){"use strict";cc._RF.push(e,"d0500bIJmFG0aQyZicWBQRs","DragonBase"),cc.Class({extends:cc.Component,onLoad:function(){this._body=this.node.getChildByName("drg00_body"),this._tail00=this._body.getChildByName("drg00_tail00"),this._tail01=this._tail00.getChildByName("drg00_tail01"),this._tail02=this._tail01.getChildByName("drg00_tail02"),this._tail03=this._tail02.getChildByName("drg00_tail03"),this._tail04=this._tail03.getChildByName("drg00_tail04"),this._L_leg_F02=this._body.getChildByName("drg00_L_leg_F02"),this._L_leg_F01=this._L_leg_F02.getChildByName("drg00_L_leg_F01"),this._L_leg_F00=this._L_leg_F01.getChildByName("drg00_L_leg_F00"),this._L_leg_F_body=this._L_leg_F00.getChildByName("drg00_L_leg_F_body"),this._R_leg_F02=this._body.getChildByName("drg00_R_leg_F02"),this._R_leg_F01=this._R_leg_F02.getChildByName("drg00_R_leg_F01"),this._R_leg_F00=this._R_leg_F01.getChildByName("drg00_R_leg_F00"),this._R_leg_F_body=this._R_leg_F00.getChildByName("drg00_R_leg_F_body"),this._L_leg_B02=this._body.getChildByName("drg00_L_leg_B02"),this._L_leg_B01=this._L_leg_B02.getChildByName("drg00_L_leg_B01"),this._L_leg_B00=this._L_leg_B01.getChildByName("drg00_L_leg_B00"),this._L_leg_B_body=this._L_leg_B00.getChildByName("drg00_L_leg_B_body"),this._R_leg_B02=this._body.getChildByName("drg00_R_leg_B02"),this._R_leg_B01=this._R_leg_B02.getChildByName("drg00_R_leg_B01"),this._R_leg_B00=this._R_leg_B01.getChildByName("drg00_R_leg_B00"),this._R_leg_B_body=this._R_leg_B00.getChildByName("drg00_R_leg_B_body"),cc.log("*** Dragon Base Init ***"),cc.log("drg00_tail00:"+this._tail00.setLocalZOrder(-10)),cc.log("drg00_tail01:"+this._tail01.setLocalZOrder(-8)),cc.log("drg00_tail02:"+this._tail02.setLocalZOrder(-6)),cc.log("drg00_tail03:"+this._tail03.setLocalZOrder(-4)),cc.log("drg00_tail04:"+this._tail04.setLocalZOrder(-2)),cc.log("drg00_L_leg_F02:"+this._L_leg_F02.setLocalZOrder(-8)),cc.log("drg00_L_leg_F01:"+this._L_leg_F01.setLocalZOrder(-6)),cc.log("drg00_L_leg_F00:"+this._L_leg_F00.setLocalZOrder(-4)),cc.log("drg00_L_leg_F_body:"+this._L_leg_F_body.setLocalZOrder(-2)),cc.log("drg00_R_leg_F02:"+this._R_leg_F02.setLocalZOrder(-8)),cc.log("drg00_R_leg_F01:"+this._R_leg_F01.setLocalZOrder(-6)),cc.log("drg00_R_leg_F00:"+this._R_leg_F00.setLocalZOrder(-4)),cc.log("drg00_R_leg_F_body:"+this._R_leg_F_body.setLocalZOrder(-2)),cc.log("drg00_L_leg_B02:"+this._L_leg_B02.setLocalZOrder(-8)),cc.log("drg00_L_leg_B01:"+this._L_leg_B01.setLocalZOrder(-6)),cc.log("drg00_L_leg_B00:"+this._L_leg_B00.setLocalZOrder(-4)),cc.log("drg00_L_leg_B_body:"+this._L_leg_B_body.setLocalZOrder(-2)),cc.log("drg00_R_leg_B02:"+this._R_leg_B02.setLocalZOrder(-8)),cc.log("drg00_R_leg_B01:"+this._R_leg_B01.setLocalZOrder(-6)),cc.log("drg00_R_leg_B00:"+this._R_leg_B00.setLocalZOrder(-4)),cc.log("drg00_R_leg_B_body:"+this._R_leg_B_body.setLocalZOrder(-2))}}),cc._RF.pop()},{}],DragonDBGView:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}cc._RF.push(e,"8748fKTo7tDII8R3qJ5gJ1A","DragonDBGView");var n=t("DebugViewBase"),_=function(t){function e(){a(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.GetView=function(){return this.clear_label(),this.set_indent(!0),this.add_label("Dragon Head",this.GM.TargetDragonPos),this.get_label()},t.GM=cc.director.getScene().getChildByName("Canvas").getComponent("GameManager").GM_CLASS,t.DM=t.GM.DM,t}return o(e,n),e}();e.exports=_,cc._RF.pop()},{DebugViewBase:"DebugViewBase"}],DragonManager:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}cc._RF.push(e,"9eb99alQYFIjqlkfbzW20Rz","DragonManager");var s,o,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),_=(o=s=function(){function t(e,i){a(this,t),cc.log("    ***** Dragon Manager constructor ***** "),t.GM=cc.director.getScene().getChildByName("Canvas").getComponent("GameManager").GM_CLASS,t.CM=t.GM.COLLISION_MANAGER,t.STAGE_BASE=t.GM.STAGE_BASE,t.DRAGON_HEAD_POS_4GM=new cc.Vec2,t.Target=null,t.JOINT_DATA_NUM=6,t._VIEW_JOINT_NUM=6,t.BASE_POS=new cc.Vec2(0,-45),t._length=60,t.lrad=[],t.vrad=[],t.view_rot=[],t.base_rot=[],cc.log(" DM.JOINT_DATA_NUM:"+t.JOINT_DATA_NUM);for(var s=0;s<t.JOINT_DATA_NUM;s++)t.lrad[s]=3,t.vrad[s]=1,t.view_rot[s]=0,t.base_rot[s]=0;t._timer=0,t.Position=[];for(var o=0;o<t.JOINT_DATA_NUM;o++)t.Init_Position(t.Position);t.Position[0].set(t.BASE_POS),t.BasePosition=[];for(var n=0;n<t.JOINT_DATA_NUM;n++)t.Init_Position(t.BasePosition);t.BasePosition[0].set(t.BASE_POS),t._VIEW_JOINT_NUM=t.JOINT_DATA_NUM,t.IntSin_Table=[];for(var _=0;_<1e4;_++)t.IntSin_Table[_]=-Math.cos(_*Math.PI*2/1e4);t._swing_flag=!0,t.set_swing_speed(1714),t.set_swing_width_btm(.64),t.set_swing_width_tip(.45),t.set_swing_delay(3973),t.set_swing_length(33),t.set_swing_size(1.4),t.GM.registTargetDragonPos(t.Position[t.JOINT_DATA_NUM-1]),t.init_sprits(e,i)}return n(t,null,[{key:"Dbg_Increase_joint",value:function(){t._VIEW_JOINT_NUM++,t.JOINT_DATA_NUM<t._VIEW_JOINT_NUM&&(t.Init_joint(),t.JOINT_DATA_NUM++)}},{key:"Dbg_Decrease_joint",value:function(){t._VIEW_JOINT_NUM--}}]),t}(),s.init_sprits=function(t,e){_.SpritsNode=[];for(var i=void 0,a=0;a<_.JOINT_DATA_NUM;a++)_.SpritsNode[a]=new cc.Node("child_"+a),i=_.SpritsNode[a].addComponent(cc.Sprite),a==_.JOINT_DATA_NUM-1?(i.spriteFrame=t,_.HEAD_SPRITE=i,_.CM.setBodyCollision(_.CM.ENUM_DRAGON,_.SpritsNode[a],80,_)):i.spriteFrame=e,_.SpritsNode[a].parent=_.STAGE_BASE},s.Init_Position=function(t){t[t.length]=new cc.Vec2(0,0),cc.log("Init BasePosition Array : length = "+t.length)},s.DBG_joint_info_Set=function(t,e){null!=_.Debug_Info&&(_.Debug_Info[t]=e)},s.DBG_joint_info_Add=function(t,e){null!=_.Debug_Info&&(_.Debug_Info[t]+=e)},s.get_joint_info=function(t){return _.Debug_Info[t]},s.DBG_Get_joint_info=function(){null==_.Debug_Info&&(_.Debug_Info=[],cc.log("Debug_Info Array が無かったので宣言しました"));for(var t="",e=0;e<_.JOINT_DATA_NUM;e++)t+=_.get_joint_info(e)+"\n";return t},s.v2_2_txt=function(t){var e="";return e+=Math.round(t.x)+", "+Math.round(t.y)},s.toggle_swing=function(){_._swing_flag?(_._swing_flag=!1,cc.log("Swing OFF")):(_._swing_flag=!0,cc.log("Swing ON"))},s.set_swing_speed=function(t){_._swing_speed=t},s.set_swing_width_btm=function(t){_._swing_width_btm=t},s.set_swing_width_tip=function(t){_._swing_width_tip=t},s.set_swing_delay=function(t){_._swing_delay=t},s.set_swing_length=function(t){_._length=t},s.set_swing_size=function(t){_._swing_size=t,cc.log("Change swing size ="+_._swing_size)},s.get_IntSin_Table=function(t){return(t<0||t>=1e4)&&cc.warn("spd="+t+" swing_delay="+_._swing_delay),_.IntSin_Table[t]},s.move_delta_base=new cc.Vec2,s.move_delta=new cc.Vec2,s.vec_2_target=new cc.Vec2,s.vec_2_Tip=new cc.Vec2,s.pos_turnR=new cc.Vec2,s.pos_turnL=new cc.Vec2,s.MoveJoint=function(t,e,i){var a=void 0,s=_._VIEW_JOINT_NUM-1,o=void 0,n=void 0;for(a=s;a>=0;a--){_.vec_2_target=e.sub(_.BasePosition[a]),_.vec_2_Tip.set(_.BasePosition[s].sub(_.BasePosition[a])),o=_.vec_2_target.signAngle(_.vec_2_Tip),0==a&&(n=Math.atan2(_.vec_2_target.y,_.vec_2_target.x),o=(o-_.base_rot[a]+n)/2),o>Math.PI?o-=2*Math.PI:o<-Math.PI&&(o+=2*Math.PI),_.DBG_joint_info_Set(a,a+" =  JA = "+o.toFixed(2)),0==a&&_.DBG_joint_info_Add(a,"  JA2 = "+n.toFixed(2));var r=void 0;r=0==a?Math.PI/2:0,a==s||(o<.1&&o>-.1?_.DBG_joint_info_Add(a," 回転なし(ぷるぷる防止)"):o>0?(_.DBG_joint_info_Add(a," 右回転"),o>t[a]&&(o=t[a],_.DBG_joint_info_Add(a," 速度限界")),_.base_rot[a]+o+r>_.lrad[a]&&(o=_.lrad[a]-_.base_rot[a]-r,_.DBG_joint_info_Add(a," 角度限界")),_.vec_2_Tip.addSelf(_.vec_2_Tip.rotate(o)),_.base_rot[a]=_.base_rot[a]+o):o<0?(_.DBG_joint_info_Add(a," 左回転"),o<-t[a]&&(o=-t[a],_.DBG_joint_info_Add(a," 速度限界")),_.base_rot[a]+o+r<-_.lrad[a]&&(o=-_.lrad[a]-_.base_rot[a]-r,_.DBG_joint_info_Add(a," 角度限界")),_.vec_2_Tip.addSelf(_.vec_2_Tip.rotate(o)),_.base_rot[a]=_.base_rot[a]+o):_.DBG_joint_info_Add(a," 回転なし"),_.base_rot[a]>=2*Math.PI?_.base_rot[a]-=2*Math.PI:_.base_rot[a]<=2*-Math.PI&&(_.base_rot[a]+=2*Math.PI))}for(_.do_swing(a),_.move_delta_base.x=_._length,_.move_delta_base.y=0,_.move_delta.x=_._length,_.move_delta.y=0,a=1;a<_._VIEW_JOINT_NUM;a++)_.move_delta_base.rotateSelf(_.base_rot[a-1]),_.BasePosition[a].set(_.BasePosition[a-1].add(_.move_delta_base)),_._swing_flag&&(_.move_delta=_.move_delta.rotate(_.view_rot[a-1]),_.Position[a].set(_.Position[a-1].add(_.move_delta)));if(!_._swing_flag)for(a=0;a<_._VIEW_JOINT_NUM;a++)_.view_rot[a]=_.base_rot[a],_.Position[a].set(_.BasePosition[a]);for(_.vec_2_target=e.sub(_.Position[s]),_.base_rot[s]=Math.atan2(_.vec_2_target.y,_.vec_2_target.x),_.view_rot[s]=Math.atan2(_.vec_2_target.y,_.vec_2_target.x),a=0;a<_._VIEW_JOINT_NUM;a++)_.DBG_joint_info_Add(a,"  RB = "+_.base_rot[a].toFixed(2)+"  RV = "+_.view_rot[a].toFixed(2))},s.do_swing=function(t){var e=_._VIEW_JOINT_NUM-1;if(_._swing_flag)for(t=0;t<_._VIEW_JOINT_NUM;t++){var i=0;_._swing_delay<0&&(i-=_._swing_delay*e),i+=_._swing_delay*t,i/=e,i+=_._timer*_._swing_speed,i=Math.round(i),i%=1e4;var a=_._swing_width_tip*t+_._swing_width_btm*(e-t);a/=e,_.view_rot[t]=_.base_rot[t]+_.get_IntSin_Table(i)*a,_.DBG_joint_info_Add(t," Data ="+i),_.DBG_joint_info_Add(t," Wdt ="+a.toFixed(2)),_.DBG_joint_info_Add(t," RSw ="+_.base_rot[t].toFixed(1))}},s.hit_callback=function(){cc.log("DragonManager: Hit callback"),_.HEAD_SPRITE.dstBlendFactor=cc.BlendFunc.BlendFactor.ONE,_.damage_timer=.2,_.blink=!0},s.blink_func=function(t){1==_.blink&&(_.damage_timer<=0?(_.HEAD_SPRITE.dstBlendFactor=cc.BlendFunc.BlendFactor.ONE_MINUS_SRC_ALPHA,_.damage_timer=0,_.blink=!1):_.damage_timer-=t)},s.nowVrad=[],s.updateDM=function(t){_.blink_func(t),null==_.Target&&(_.Target=_.GM.getTargetPlayer(0),cc.log("Get DM.Target from GM, result:"+_.Target));for(var e=0;e<_._VIEW_JOINT_NUM;e++)_.nowVrad[e]=_.vrad[e]*t;_._timer+=t,_._timer>=_._timer*_._swing_speed&&(_._timer-=_._timer*_._swing_speed),_.MoveJoint(_.nowVrad,_.Target,t);for(var i=0,a=0;a<_._VIEW_JOINT_NUM;a++)_.SpritsNode[a].setScale(_._swing_size),_.SpritsNode[a].setPosition(_.Position[a]),i+=_.view_rot[a],a==_._VIEW_JOINT_NUM-1?_.SpritsNode[a].rotation=180*-_.view_rot[a]/Math.PI-90:_.SpritsNode[a].rotation=180*-i/Math.PI-90},o);e.exports=_,cc._RF.pop()},{}],EffectBase:[function(t,e,i){"use strict";cc._RF.push(e,"ca661bHECNK8LKVmZesQkE5","EffectBase");var a=cc.Node.extend({ctor:function(){this.Type=-1,this.Vector=new cc.Vec2(0,0),this.active=!1,this.isHit=!1,this.setAnchorPoint(.5,.5),this.startTime=-1,this.endTime=-1,this.ccSprite=this.addComponent(cc.Sprite),this.ccAnimation=this.addComponent(cc.Animation),this.ccSprite.enabled=!1,this.ccAnimation.enabled=!1,this.target_node=null}});e.exports=a,cc._RF.pop()},{}],EffectManager:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}cc._RF.push(e,"e1cfe2Ukn5Hi5uRO8nRvN0w","EffectManager");var s,o,n=t("EffectBase"),_=(o=s=function t(){a(this,t),cc.log("      **** Attack Manager Constructor ****"),t.GM=cc.director.getScene().getChildByName("Canvas").getComponent("GameManager").GM_CLASS,t.NORMAL_GROUP=1,t.TEMP_GROUP=2,t.TYPE_FOLLOW=1,t.TYPE_STAY=2,t.init_reserved_EB(),t.EFCT_NUM=[],t.EfctBase=[],cc.log("      Init Ettacts Normal Group"),t.EFCT_NUM[t.NORMAL_GROUP]=0,t.EfctBase[t.NORMAL_GROUP]=[],cc.log("      Init Effects Temp Group"),t.EFCT_NUM[t.TEMP_GROUP]=0,t.EfctBase[t.TEMP_GROUP]=[],t.move=new cc.Vec2(0,0)},s.init_reserved_EB=function(){_.RES_AB_MAX=0,_.ResAB_UseNum=0,_.RESERVED_AB=[];for(var t=0;t<60;t++)_.initEffectBase()},s.initEffectBase=function(){var t=_.RES_AB_MAX;_.RESERVED_AB[t]=new n,_.RESERVED_AB[t].ArrayID=t,_.RES_AB_MAX++},s.get_reserved_EB=function(){return _.AB_RESERVE_NUM>=_.AB_RESERVE_NUM?(cc.warn("RESERVE AB Num over:"+_.ResAB_UseNum+" / "+_.RES_AB_MAX),null):(_.ResAB_UseNum++,_.RESERVED_AB[_.ResAB_UseNum-1])},s.return_reserved_EB=function(t){_.RESERVED_AB[t].removeFromParent(!1);var e=_.RESERVED_AB[t];_.RESERVED_AB[t]=_.RESERVED_AB[_.ResAB_UseNum-1],_.RESERVED_AB[_.ResAB_UseNum-1]=e;var i=_.RESERVED_AB[t].ArrayID;_.RESERVED_AB[t].ArrayID=_.RESERVED_AB[_.ResAB_UseNum-1].ArrayID,_.RESERVED_AB[_.ResAB_UseNum-1].ArrayID=i,_.ResAB_UseNum--},s.setEffect=function(t,e,i,a,s,o,n){var r=this.get_reserved_EB();if(null!=r){r.ccSprite.spriteFrame=_.SPRITES[_.NORMAL_GROUP],r.scale=.7,r.parent=_.GM.STAGE_BASE,r.Vector.set(i),r.setPosition(n.position),cc.log("set Atk EM.pos_move:"+n.position+", Vector:"+i),r.target_node=n,r.Type=t,r.isHit=!1,r.active=!0,r.startTime=s,r.endTime=o;var c=_.EFCT_NUM[_.TEMP_GROUP];_.EfctBase[_.TEMP_GROUP][c]=r,_.EFCT_NUM[_.TEMP_GROUP]++}},s.removeEffect=function(t,e){switch(t){case _.NORMAL_GROUP:_.CM.removeEAtkCol(_.EfctBase[t][e].collision.ColID);break;case _.TEMP_GROUP:_.CM.removePAtkCol(_.EfctBase[t][e].collision.ColID);break;default:cc.warn("Remove Bullety group Error")}_.return_reserved_EB(_.EfctBase[t][e].ArrayID);var i=_.EfctBase[t][e];_.EfctBase[t][e]=_.EfctBase[t][_.EFCT_NUM[t]-1],_.EfctBase[t][_.EFCT_NUM[t]-1]=i,_.EFCT_NUM[t]--},s.fixedUpdate=function(t){for(var e=_.GM.getStageRotation(),i=0;i<_.EFCT_NUM[_.NORMAL_GROUP];i++)_.EfctBase[_.NORMAL_GROUP][i].rotation=-e,_.move.set(_.EfctBase[_.NORMAL_GROUP][i].Vector),_.move.mulSelf(t),_.move.addSelf(_.EfctBase[_.NORMAL_GROUP][i].position),_.EfctBase[_.NORMAL_GROUP][i].setPosition(_.move.x,_.move.y),_.EfctBase[_.NORMAL_GROUP][i].isHit?(_.removeEffect(_.NORMAL_GROUP,i),i--):(Math.abs(_.EfctBase[_.NORMAL_GROUP][i].position.x)>_._ScreenEdge_w||Math.abs(_.EfctBase[_.NORMAL_GROUP][i].position.y)>_._ScreenEdge_h)&&_.removeEffect(_.NORMAL_GROUP,i);for(i=0;i<_.EFCT_NUM[_.TEMP_GROUP];i++)_.EfctBase[_.TEMP_GROUP][i].Type==_.TYPE_FOLLOW?(_.pos_move.set(_.EfctBase[_.TEMP_GROUP][i].target_node.position),_.pos_move.addSelf(_.EfctBase[_.TEMP_GROUP][i].Vector),_.EfctBase[_.TEMP_GROUP][i].setPosition(_.pos_move)):_.EfctBase[_.TEMP_GROUP][i].Type==_.TYPE_STAY&&(_.pos_move.set(_.EfctBase[_.TEMP_GROUP][i].Vector),_.pos_move.mulSelf(t),_.pos_move.addSelf(_.EfctBase[_.TEMP_GROUP][i].position),_.EfctBase[_.TEMP_GROUP][i].setPosition(_.pos_move)),_.EfctBase[_.TEMP_GROUP][i].endTime-=t,_.EfctBase[_.TEMP_GROUP][i].endTime<=0&&(_.removeEffect(_.TEMP_GROUP,i),i--)},o);e.exports=_,cc._RF.pop()},{EffectBase:"EffectBase"}],FixedUpdateManager:[function(t,e,i){"use strict";cc._RF.push(e,"c65469VYchKG6pYn+zxVeoZ","FixedUpdateManager");var a=cc.Class({extends:cc.Component,properties:{},statics:{FixedUpdateFuncs:[],ViewUpdateFuncs:[],LateUpdateFuncs:[],FixedUpdateNum:0,ViewUpdateNum:0,LateUpdateNum:0,addFixedUpdateFunction:function(t){a.FixedUpdateFuncs[a.FixedUpdateNum]=t,a.FixedUpdateNum++},addLateUpdateFunction:function(t){a.LateUpdateFuncs[a.LateUpdateNum]=t,a.LateUpdateNum++},addViewUpdateFunction:function(t){a.ViewUpdateFuncs[a.ViewUpdateNum]=t,a.ViewUpdateNum++},testlog:function(){cc.log("This is test of FUM")}},onLoad:function(){cc.log("************* Fixed Update Manager Init ***************")},update:function(t){for(var e=0;e<a.FixedUpdateNum;e++)a.FixedUpdateFuncs[e](t);for(var i=0;i<a.ViewUpdateNum;i++)a.ViewUpdateFuncs[i](t)},lateUpdate:function(t){for(var e=0;e<a.LateUpdateNum;e++)a.LateUpdateFuncs[e](t)}});e.exports=a,cc._RF.pop()},{}],GameManager:[function(t,e,i){"use strict";cc._RF.push(e,"16d1a6OsElNzoFzsk+h7c40","GameManager");var a=t("FixedUpdateManager"),s=t("CollisionManager"),o=t("DragonManager"),n=t("InputManager"),_=t("AttackManager"),r=t("CharacterManager"),c=t("EffectManager"),h=cc.Class({name:"ColData",properties:{E_ATK_MAX:0,P_ATK_MAX:0,PLAYER_MAX:0,ENEMY_MAX:0}}),A=cc.Class({name:"AMData",properties:{S_ATK_MAX:0,M_ATK_MAX:0,L_ATK_MAX:0,ATK_S_SPRITE:cc.SpriteFrame,ARROW:cc.SpriteFrame,ATK_L_SPRITE:cc.SpriteFrame}}),l=cc.Class({name:"DragonData",properties:{DRAGON_Prefab:cc.Prefab,HEAD_SPRITE:cc.SpriteFrame,NECK_SPRITE:cc.SpriteFrame}}),u=cc.Enum({c00:0,c01:1,HvyA:2}),E=cc.Class({name:"charData",properties:{Type:{default:u.c00,type:u},Position:cc.Vec2}}),d=cc.Class({name:"charPrefab",properties:{Shadow_Prefab:cc.Prefab,c00Prefab:cc.Prefab,c01Prefab:cc.Prefab,HvyPrefab:cc.Prefab}}),g=cc.Class({extends:cc.Component,properties:{SHOW_TIME_FLAG:!0,INPUT_MANAGER_FLAG:!0,IM_Prefab:{default:null,type:cc.Prefab},COLLISION_MANAGER_FLAG:!0,COL_DATA:{type:h,default:cc.Object},DRAGON_BASE_FLAG:!0,DRA_DATA:{type:l,default:cc.Object},CHARACTER_MANAGER_FLAG:!0,CHAR_PREFAB:{type:d,default:cc.Object},CHAR_DAT:{type:[E],default:[]},ATTACK_MANAGER_FLAG:!0,AM_DATA:{type:A,default:cc.Object},EFFECT_MANAGER_FLAG:!0,EFFECT_NUM:10},onLoad:function(){if(cc.log("************* Game Manager Init ***************"),this.GM_CLASS=g,g.SCENE=cc.director.getScene(),g.CANVAS=g.SCENE.getChildByName("Canvas"),g.STAGE_BASE=g.CANVAS.getChildByName("StageBase"),this.SHOW_TIME_FLAG){cc.log("    Set FPS and TIME from GM"),g._averageDT=.03;var t=new cc.Node;t.setPosition(-530,950),t.anchorX=0,t.anchorY=1,t.parent=g.CANVAS,g._label=t.addComponent(cc.Label),g._label.fontSize=40,g._label.lineHeight=40,g._label.VerticalAlign=cc.Label.VerticalAlign.TOP,g._gameTime=0,g.addUpdateFunction(g.showTimeUpdate)}else cc.warn("FPS and TIME is OFF");if(this.INPUT_MANAGER_FLAG){cc.log("    Set InputManager from GM");var e=cc.instantiate(this.IM_Prefab);cc.log("      Instantiate InputManager Prefab"),null==e?cc.warn("    InputManagerのPrefabをセットして下さい"):(e.parent=g.SCENE,g.INPUT_MANAGER=n)}else cc.warn("INPUT is OFF");this.COLLISION_MANAGER_FLAG?(cc.log("    Set Collision Manager from GM"),new s(this.COL_DATA.E_ATK_MAX,this.COL_DATA.P_ATK_MAX,this.COL_DATA.PLAYER_MAX,this.COL_DATA.ENEMY_MAX),g.COLLISION_MANAGER=s,a.addLateUpdateFunction(s.updateCM)):cc.warn("COLLISION MANAGER is OFF"),this.DRAGON_BASE_FLAG?(cc.log("    Set Dragon Manager"),cc.instantiate(this.DRA_DATA.DRAGON_Prefab).parent=g.STAGE_BASE,new o(this.DRA_DATA.HEAD_SPRITE,this.DRA_DATA.NECK_SPRITE),g.DRAGON_BASE=o,a.addFixedUpdateFunction(o.updateDM)):cc.warn("DRAGON BASE is OFF"),this.ATTACK_MANAGER_FLAG?(cc.log("    Set Attack Manager"),new _(this.AM_DATA.ATK_S_SPRITE,this.AM_DATA.ATK_M_SPRITE,this.AM_DATA.ATK_L_SPRITE),g.ATTACK_MANAGER=_,a.addFixedUpdateFunction(_.fixedUpdate)):cc.warn("ATTACK MANAGER is OFF"),this.CHARACTER_MANAGER_FLAG?(cc.log("    Set Character Manager"),new r(this.CHAR_DAT.length,this.CHAR_DAT,this.CHAR_PREFAB.c00Prefab,this.CHAR_PREFAB.c01Prefab,this.CHAR_PREFAB.HvyPrefab,this.CHAR_PREFAB.Shadow_Prefab),g.CHARACTER_MANAGER=r,a.addFixedUpdateFunction(r.fixedUpdate)):cc.warn("CHARACTER MANAGER is OFF"),this.EFFECT_MANAGER_FLAG?(cc.log("    Set Effect Manager"),new c,g.EFFECT_MANAGER=c,a.addFixedUpdateFunction(c.fixedUpdate)):cc.warn("EFFECT MANAGER is OFF")},statics:{UpdateFuncs:[],LateUpdateFuncs:[],Update_Num:0,LateUpdate_Num:0,addUpdateFunction:function(t){g.UpdateFuncs[g.Update_Num]=t,g.Update_Num++},CANVAS:null,INPUT_MANAGER:null,TargetDragonPos:null,registTargetDragonPos:function(t){g.TargetDragonPos=t,cc.log("    Registed Dragon Target:"+g.TargetDragonPos)},getTargetDragonPos:function(t){return g.TargetDragonPos},TargetPlayersPos:[],TargetPlayerNum:0,registTargetPlayer:function(t){g.TargetPlayersPos[0]=t},getTargetPlayer:function(t){return g.TargetPlayersPos[t]},StageRotation:0,setStageRotation:function(t){g.StageRotation=t},getStageRotation:function(){return g.StageRotation},CharMove:new cc.Vec2(0,0),getCharMove:function(){return g.CharMove},setCharMove:function(t,e){g.CharMove.x=t,g.CharMove.y=e},setCameraTarget:function(t){g.CAMERA_TARGET=t},getCameraTarget:function(){return g.CAMERA_TARGET},showTimeUpdate:function(t){g._gameTime+=t,g._averageDT=127*g._averageDT/128,g._averageDT+=t/128,g._label.string="FPS: "+(1/g._averageDT).toFixed(1)+"    TIME: "+g._gameTime.toFixed(1)}},setInvIncible:function(){g.COLLISION_MANAGER.setInvincible()},nextCameraTarget:function(){g.CHARACTER_MANAGER.nextCameraTarget()},prevCameraTarget:function(){g.CHARACTER_MANAGER.prevCameraTarget()},update:function(t){for(var e=0;e<g.Update_Num;e++)g.UpdateFuncs[e](t)},lateUpdate:function(t){for(var e=0;e<g.LateUpdate_Num;e++)g.LateUpdateFuncs[e](t)},DebugResurectButton:function(){g.CHARACTER_MANAGER.debugResurect()},DebugInvincibleButton:function(){g.COLLISION_MANAGER.setInvincible()},DebugTogleShootButton:function(){g.ATTACK_MANAGER.togleShoot()}});e.exports=g,cc._RF.pop()},{AttackManager:"AttackManager",CharacterManager:"CharacterManager",CollisionManager:"CollisionManager",DragonManager:"DragonManager",EffectManager:"EffectManager",FixedUpdateManager:"FixedUpdateManager",InputManager:"InputManager"}],GaugeControl:[function(t,e,i){"use strict";cc._RF.push(e,"b7dbdDAN5pFdo7jsWZaH5pM","GaugeControl"),cc.Class({extends:cc.Component,properties:{GAUGE_CAPA:{default:null,type:cc.Node},GAUGE_BAR:{default:null,type:cc.Node},CHARACTER:{default:null,type:cc.Component}},onLoad:function(){},update:function(t){this.GAUGE_BAR.setScaleX(0),this.GAUGE_CAPA.setScaleX(this.CHARACTER._combo_num/3)}}),cc._RF.pop()},{}],GetSetTest:[function(t,e,i){"use strict";cc._RF.push(e,"43e9dhJyoZMOpNg3fF9xhB2","GetSetTest");var a=t("Util"),s=cc.Class({extends:cc.Component,properties:{_Num:99,Num:0,Num_stat:-1},statics:{_Num:-99},onLoad:function(){cc.log("Check:"+s.Num),s.Num++}});a.getset(s,"Num",function(){return s._Num},function(t){s._Num=t,cc.log("Set:"+t)}),cc._RF.pop()},{Util:"Util"}],HistoryData:[function(t,e,i){"use strict";cc._RF.push(e,"05054pf3sxNfYoN3ESelC1D","HistoryData"),e.exports={connection_txt:"[XMLHttpRequest Test]\n",result_data:""},cc._RF.pop()},{}],InputManagerView:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}cc._RF.push(e,"20555WCsaRBR4DNYACo6wR0","InputManagerView");var n=t("DebugViewBase"),_=function(t){function e(){a(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.GetView=function(){return this.clear_label(),this.add_label("Angle ",this.InputManager._angle_for_debug_view),this.add_label("Direct",this.InputManager._Pad.Dir),this.add_label("IsToch",this.InputManager._Pad.Touch),this.add_label("Tap   ",this.InputManager._Pad.Tapped),this.add_label("Flick ",this.InputManager._Pad.Flicked),this.add_label("Touch Time ",this.InputManager._touch_timer.toFixed(2)),this.add_label("Flick dist ",this.InputManager._flick_dist.toFixed(2)),this.add_label("Swipe dist ",this.InputManager._swipe_dist.toFixed(2)),this.get_label()},t.GM=cc.director.getScene().getChildByName("Canvas").getComponent("GameManager").GM_CLASS,t.InputManager=t.GM.INPUT_MANAGER,cc.log("InputManager:"+t.InputManager),t}return o(e,n),e}();e.exports=_,cc._RF.pop()},{DebugViewBase:"DebugViewBase"}],InputManager:[function(t,e,i){"use strict";cc._RF.push(e,"8e367PdbitAwpDJ7YW9H6PS","InputManager");var a=t("ControlData"),s=cc.Class({extends:cc.Component,properties:{},statics:{_Pad:null,_touch_timer:0,_flick_dist:0,_swipe_dist:0,viewComponent:null,_Touch_pos:new cc.Vec2,_Touch_pos_old:new cc.Vec2,_angle_for_debug_view:0,NONE:0,U:1,LU:2,L:3,LD:4,D:5,RD:6,R:7,RU:8,setVuewCallBackFunc:function(t){s.viewComponent=t},touchMove:function(t){var e=cc.pSub(t.getLocation(),s._Touch_pos),i=Math.atan2(e.y,e.x);(i-=Math.PI/2)<0&&(i+=2*Math.PI),s._angle_for_debug_view=i;var a=8*i/Math.PI;s._Pad.Dir=a<1?s.U:a<3?s.LU:a<5?s.L:a<7?s.LD:a<9?s.D:a<11?s.RD:a<13?s.R:a<15?s.RU:s.U;var o=cc.pLength(cc.pSub(s._Touch_pos_old,t.getLocation()));s._Touch_pos_old=t.getLocation(),s._swipe_dist+=o,o>10?s._flick_dist+=o:0!=s._flick_dist&&(s._flick_dist=0),s.viewComponent.touchMove(t)},touchStart:function(t){return s._Pad.Touch=!0,s._Touch_pos=t.getLocation(),s._Touch_pos_old=t.getLocation(),s.viewComponent.touchStart(t),s._touch_timer=0,s._flick_dist=0,s._swipe_dist=0,!0},touchEnd:function(t){s._Pad.Touch=!1,s._Pad.Dir=s.NONE,s._touch_timer<=.17&&s._Pad.setTapped(!0),s._flick_dist>170&&s._Pad.setFlicked(!0),s.viewComponent.touchEnd(t)}},onLoad:function(){cc.log("      **** InputManager onLoad ****"),s._Pad=new a.ControlData,cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!1,onTouchBegan:s.touchStart,onTouchMoved:s.touchMove,onTouchEnded:s.touchEnd,onTouchCanceled:s.touchEnd},this.node),cc.log("        finished")},update:function(t){s._Pad.Tapped&&s._Pad.setTapped(!1),s._Pad.Flicked&&s._Pad.setFlicked(!1),s._Pad.Touch&&(s._touch_timer+=t)}});e.exports=s,cc._RF.pop()},{ControlData:"ControlData"}],LifeGauge:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}cc._RF.push(e,"ff0e7h1joxHP5QGb0Drqc3w","LifeGauge");var s=function t(){a(this,t),this.name="Life",this.properties={NAME:"",body:null,bar:null,bar_posx_origin:0,gage_length:0}},o=function t(){a(this,t),this.name="Gauge",this.properties={NAME:"",bar:null,bar_max:null,bar_max_sprite:null,top_bar:null,side_bar_R:null,side_bar_L:null,base_00:null,base_01:null,base_02:null,middle_bar_b00:null,middle_bar_b01:null,middle_bar_w00:null,middle_bar_w01:null,top_bar_sprite:null,side_bar_R_sprite:null,side_bar_L_sprite:null,base_00_sprite:null,base_01_sprite:null,base_02_sprite:null,middle_bar_b00_sprite:null,middle_bar_b01_sprite:null,middle_bar_w00_sprite:null,middle_bar_w01_sprite:null,bar_move:null,bar_move_sprite:null,bar_posx_origin:0,gage_length:0}};e.exports=function t(e,i){a(this,t),this.properties={_Life:null,_Gauge:null,_combo_num:0,CB_COMP:null,_origin_pos:null},this.Debug_life_slider=function(t,e){var i=t.progress;this.set_life(1-i)},this.Debug_combo_set=function(){this.get_combo()>=3?(this.set_combo(0),this.set_gauge(0)):this.set_combo(this.get_combo()+1)},this.Debug_gauge_slider=function(t,e){var i=t.progress;this.set_gauge(i)},this.set_life=function(t){this._Life.body.scaleX=1-t,this._Life.bar.setPositionX(this._Life.bar_posx_origin-this._Life.gage_length*(1-t))},this.set_gauge=function(t){var e=this._combo_num/3;if(this.gaugeValue=t,t>=e)switch(t=e,this._Gauge.bar_max_sprite.setVisible(!0),this._combo_num){case 0:cc.warn("コンボ数０で set_gauge してるよ！！");break;case 1:this._Gauge.bar_max.scaleX=1/3;break;case 2:this._Gauge.bar_max.scaleX=2/3;break;case 3:this._Gauge.bar_max.scaleX=1}else this._Gauge.bar_max_sprite.setVisible(!1),t<1/3?(this._Gauge.middle_bar_w00_sprite.setVisible(!1),this._Gauge.middle_bar_w01_sprite.setVisible(!1)):t>=2/3?(this._Gauge.middle_bar_b00_sprite.setVisible(!1),this._Gauge.middle_bar_w00_sprite.setVisible(!0),this._Gauge.middle_bar_b01_sprite.setVisible(!1),this._Gauge.middle_bar_w01_sprite.setVisible(!0)):(this._Gauge.middle_bar_b00_sprite.setVisible(!1),this._Gauge.middle_bar_w00_sprite.setVisible(!0),this._Gauge.middle_bar_w01_sprite.setVisible(!1));this._Gauge.bar.scaleX=t,this._Gauge.bar_move.setPositionX(this._Gauge.bar_posx_origin+this._Gauge.gage_length*t)},this.set_combo=function(t){switch(this.gaugeValue>t/3&&this.set_gauge(t/3),this._combo_num=t,t){case 0:this._Gauge.top_bar_sprite.setVisible(!1),this._Gauge.side_bar_R_sprite.setVisible(!1),this._Gauge.side_bar_L_sprite.setVisible(!1),this._Gauge.base_00_sprite.setVisible(!1),this._Gauge.base_01_sprite.setVisible(!1),this._Gauge.base_02_sprite.setVisible(!1),this._Gauge.middle_bar_b00_sprite.setVisible(!1),this._Gauge.middle_bar_b01_sprite.setVisible(!1),this._Gauge.middle_bar_w00_sprite.setVisible(!1),this._Gauge.middle_bar_w01_sprite.setVisible(!1),this._Gauge.bar_move_sprite.setVisible(!1),this._Gauge.bar.scaleX=0,this._Gauge.bar_max.scaleX=0,this._Gauge.bar_max_sprite.setVisible(!1);break;case 1:this._Gauge.top_bar_sprite.setVisible(!0),this._Gauge.side_bar_R.setPositionX(16),this._Gauge.top_bar.scaleX=.33,this._Gauge.side_bar_R_sprite.setVisible(!0),this._Gauge.side_bar_L_sprite.setVisible(!0),this._Gauge.base_00_sprite.setVisible(!0),this._Gauge.base_01_sprite.setVisible(!1),this._Gauge.base_02_sprite.setVisible(!1),this._Gauge.bar_move_sprite.setVisible(!0);break;case 2:this._Gauge.top_bar.scaleX=.7,this._Gauge.side_bar_R.setPositionX(30),this._Gauge.base_01_sprite.setVisible(!0),this._Gauge.base_02_sprite.setVisible(!1),this._Gauge.middle_bar_b00_sprite.setVisible(!0);break;case 3:this._Gauge.top_bar.scaleX=1,this._Gauge.side_bar_R.setPositionX(44),this._Gauge.base_02_sprite.setVisible(!0),this._Gauge.middle_bar_b01_sprite.setVisible(!0)}},this.get_combo=function(){return this._combo_num},this.update=function(t){this.node.setPositionY(this.CB_COMP.getJumpHeight()+this._origin_pos.y)},this.CB_COMP=e,this.node=i,this._origin_pos=new cc.Vec2,this._origin_pos.set(this.node.getPosition()),this._Life=new s;var n=this.node.getChildByName("life");this._Life.body=n.getChildByName("life_damage"),this._Life.gage_length=this._Life.body.getContentSize().width,this._Life.bar=n.getChildByName("life_bar_w_move"),this._Life.bar_posx_origin=this._Life.bar.getPositionX(),this._Gauge=new o;var _=this.node.getChildByName("gauge");this._Gauge.bar=_.getChildByName("gauge_bar"),this._Gauge.bar_max=_.getChildByName("gauge_bar_max"),this._Gauge.bar_max_sprite=this._Gauge.bar_max.getComponent(cc.Sprite),this._Gauge.top_bar=_.getChildByName("gauge_base_top"),this._Gauge.top_bar_sprite=this._Gauge.top_bar.getComponent(cc.Sprite),this._Gauge.side_bar_R=_.getChildByName("gauge_base_side_R"),this._Gauge.side_bar_R_sprite=this._Gauge.side_bar_R.getComponent(cc.Sprite),this._Gauge.side_bar_L=_.getChildByName("gauge_base_side_L"),this._Gauge.side_bar_L_sprite=this._Gauge.side_bar_L.getComponent(cc.Sprite),this._Gauge.base_00=_.getChildByName("gauge_base_back00"),this._Gauge.base_00_sprite=this._Gauge.base_00.getComponent(cc.Sprite),this._Gauge.base_01=_.getChildByName("gauge_base_back01"),this._Gauge.base_01_sprite=this._Gauge.base_01.getComponent(cc.Sprite),this._Gauge.base_02=_.getChildByName("gauge_base_back02"),this._Gauge.base_02_sprite=this._Gauge.base_02.getComponent(cc.Sprite),this._Gauge.middle_bar_b00=_.getChildByName("gauge_base_bar_b00"),this._Gauge.middle_bar_b00_sprite=this._Gauge.middle_bar_b00.getComponent(cc.Sprite),this._Gauge.middle_bar_b01=_.getChildByName("gauge_base_bar_b01"),this._Gauge.middle_bar_b01_sprite=this._Gauge.middle_bar_b01.getComponent(cc.Sprite),this._Gauge.middle_bar_w00=_.getChildByName("gauge_base_bar_w00"),this._Gauge.middle_bar_w00_sprite=this._Gauge.middle_bar_w00.getComponent(cc.Sprite),this._Gauge.middle_bar_w01=_.getChildByName("gauge_base_bar_w01"),this._Gauge.middle_bar_w01_sprite=this._Gauge.middle_bar_w01.getComponent(cc.Sprite),this._Gauge.bar_move=_.getChildByName("gauge_bar_move"),this._Gauge.bar_move_sprite=this._Gauge.bar_move.getComponent(cc.Sprite),this._Gauge.gage_length=this._Gauge.bar.getContentSize().width,this._Gauge.bar_posx_origin=this._Gauge.bar.getPositionX(),this.set_combo(0)},cc._RF.pop()},{}],ObjectPoolTest:[function(t,e,i){"use strict";cc._RF.push(e,"716a1NLIgNNm6dK4NHLMj4Z","ObjectPoolTest"),cc.Class({extends:cc.Component,properties:{SPRITE_FRAME:cc.SpriteFrame,INFO_LABEL:cc.Label,OBJECT_NUMBERS:0,CREATE_NUMBERS:0,REUSE_NUMBERS:0},create_object:function(){var t=new cc.Node("Objects:"+this.object_num);t.anchorX=.5,t.anchorY=.5,t.setPosition(this.SIZE_W*cc.randomMinus1To1(),this.SIZE_H*cc.randomMinus1To1()),t.speed=new cc.Vec2,t.speed.x=100*cc.randomMinus1To1()+100,t.speed.y=100*cc.randomMinus1To1()+100,t.addComponent(cc.Sprite).spriteFrame=this.SPRITE_FRAME,t.parent=this.node,this.OBJECTS[this.object_num]=t,this.object_num++,this.OBJECT_NUMBERS++},unassign_object:function(){var t=cc.random0To1()*(this.object_num-1);t=Math.round(t);var e=this.OBJECTS[t];this.OBJECTS[t].removeFromParent(!1),this.OBJECTS[t]=this.OBJECTS[this.object_num-1],this.OBJECTS[this.object_num-1]=e,this.object_num--,this.OBJECT_NUMBERS--},remove_object:function(){var t=cc.random0To1()*(this.object_num-1);t=Math.round(t),this.OBJECTS[t].removeFromParent(),this.OBJECTS[t]=this.OBJECTS[this.object_num-1],this.object_num--,this.OBJECT_NUMBERS--},assign_object:function(){this.OBJECTS[this.object_num].parent=this.node;var t=this.OBJECTS[this.object_num];t.setPosition(this.SIZE_W*cc.randomMinus1To1(),this.SIZE_H*cc.randomMinus1To1()),t.speed.x=100*cc.randomMinus1To1()+100,t.speed.y=100*cc.randomMinus1To1()+100,t.getComponent(cc.Sprite).spriteFrame=this.SPRITE_FRAME,this.object_num++,this.OBJECT_NUMBERS++},add100_objects:function(){for(var t=0;t<100;t++)this.create_object()},deleate100_objects:function(){for(var t=0;t<100;t++)this.remove_object()},add100_create:function(){this.CREATE_NUMBERS+=1e3},sub100_create:function(){this.CREATE_NUMBERS-=1e3},add100_reuse:function(){this.REUSE_NUMBERS+=1e3},sub100_reuse:function(){this.REUSE_NUMBERS-=1e3},onLoad:function(){this.SIZE_W=540,this.SIZE_H=960,this.work_vec2=new cc.Vec2,this.OBJECTS=[],this.object_num=0,this.creats=0,this.reuses=0;for(var t=0;t<this.OBJECT_NUMBERS;t++)this.create_object(),this.OBJECT_NUMBERS--},start:function(){},update:function(t){if(this.creats+=Math.floor(this.CREATE_NUMBERS*t),this.creats){for(var e=0;e<this.creats;e++)this.remove_object(),this.create_object();this.creats=0}if(this.reuses+=Math.floor(this.REUSE_NUMBERS*t),this.REUSE_NUMBERS){for(var i=0;i<this.reuses;i++)this.unassign_object(),this.assign_object();this.reuses=0}this.INFO_LABEL.string="Objects:"+this.OBJECT_NUMBERS+"\nCreate:"+this.CREATE_NUMBERS+"\nReuse:"+this.REUSE_NUMBERS+"\n"}}),cc._RF.pop()},{}],ParentTypeAtkView:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}cc._RF.push(e,"8dbe9hku5tD/qLu9MjngDNF","ParentTypeAtkView");t("DebugViewBase");var n=t("AttackView"),_=function(t){function e(){a(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.GetView=function(){return this.createAttackView(this.AM.TYPE_PARENT)},t}return o(e,n),e}();e.exports=_,cc._RF.pop()},{AttackView:"AttackView",DebugViewBase:"DebugViewBase"}],RecordManager:[function(t,e,i){"use strict";cc._RF.push(e,"f80daegO8dNpIZP5ofeCbiw","RecordManager");t("HistoryData");var a=cc.Class({extends:cc.Component,properties:{_VPC:cc.Component},statics:{_DataStrings:"",_DataFrameLength:"0",_DataBuffer:0,_Mode:"NONE",_CurrentR_Frame:0,_CurrentP_Frame:0,FLAG_TAP:1,FLAG_SWIPE:2,FLAG_RES1:4,FLAG_RES2:8,FPOS0_CLEAR:65280,FPOS1_CLEAR:255,SetData:function(t,e,i,s,o,n){var _=e<<4;i&&(_|=a.FLAG_TAP),s&&(_|=a.FLAG_SWIPE),n&&(_|=a.FLAG_RES1),n&&(_|=a.FLAG_RES2);var r=t%2;switch(r){case 0:a._DataBuffer=a._DataBuffer&a.FPOS0_CLEAR;break;case 1:a._DataBuffer=a._DataBuffer&a.FPOS1_CLEAR}if(_<<=8*r,a._DataBuffer=a._DataBuffer|_,1==r){var c="%u"+("0000"+a._DataBuffer.toString(16)).slice(-4);c=unescape(c),a._DataStrings+=c}},GetData:function(t){if(!(t>=a._DATA_MAX)){var e=t%2,i=(t-e)/2,s=a._DataStrings.charAt(i);switch(s=escape(s).slice(-4),s=parseInt(s,16),e){case 0:s&=~a.FPOS0_CLEAR;break;case 1:s&=~a.FPOS1_CLEAR;break;case 2:s&=~a.FPOS2_CLEAR;break;case 3:s&=~a.FPOS3_CLEAR}return s>>=8*e}cc.warn(!1,"RM GetData error. size over. :"+t+"/"+a._DATA_MAX-1)},SetData2VP:function(t){switch(t&a.FLAG_TAP&&(a._VPC._IS_TAPPED=!0),t&a.FLAG_SWIPE&&(a._VPC._IS_SWIPE=!0),a.FLAG_RES1,a.FLAG_RES2,t>>=4,a._VPC._PAD_NUM=t,t){case 0:a._VPC._PAD_DIRECTION="NONE";break;case 1:a._VPC._PAD_DIRECTION="U";break;case 2:a._VPC._PAD_DIRECTION="LU";break;case 3:a._VPC._PAD_DIRECTION="L";break;case 4:a._VPC._PAD_DIRECTION="LD";break;case 5:a._VPC._PAD_DIRECTION="D";break;case 6:a._VPC._PAD_DIRECTION="RD";break;case 7:a._VPC._PAD_DIRECTION="R";break;case 8:a._VPC._PAD_DIRECTION="RU"}},record_start:function(){a._Mode="RECORD",a._CurrentR_Frame=0,a._DataFrameLength=0,a._DataStrings=""},record_stop:function(){a._Mode="RECORD END"},play_start:function(){a._Mode="PLAY",a._CurrentP_Frame=0}},onLoad:function(){a._VPC=cc.director.getScene().getChildByName("InputManager").getComponent("InputManager"),cc.assert(null!=a._VPC,"Can not find InputManager"),a._DataBuffer=0},Debug_Record_start:function(){a.record_start()},Debug_Record_stop:function(){a.record_stop()},Debug_Play_start:function(){a.play_start()},update:function(t){switch(a._Mode){case"RECORD":a.SetData(a._CurrentR_Frame,a._VPC._PAD_NUM,a._VPC._IS_TAPPED,a._VPC._IS_SWIPE,!1,!0),a._CurrentR_Frame++,a._DataFrameLength=a._CurrentR_Frame;break;case"PLAY":if(a._CurrentP_Frame>=a._DataFrameLength){cc.log("Play ended"),a._Mode="PLAY_END";break}var e=a.GetData(a._CurrentP_Frame);a.SetData2VP(e),a._CurrentP_Frame++}}});e.exports=a,cc._RF.pop()},{HistoryData:"HistoryData"}],RecordView:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}cc._RF.push(e,"241abVTf2lC4IDczYx8SVZs","RecordView");var n=t("DebugViewBase"),_=t("RecordManager"),r=function(t){function e(){a(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.GetView=function(){this.clear_label(),this.add_label("DataLength",_._DataFrameLength),this.add_label("Mode",_._Mode),this.add_label("DataStrings",_._DataStrings),this.add_line();var t=0,e="";switch(_._Mode){case"RECORD":for(var i=t=_._CurrentR_Frame-20<1?1:_._CurrentR_Frame-20;i<t+20;i++)e="[RECORD]",e+=i+": ",e+=": "+_.GetData(i-1).toString(2),i==t+19&&(e+=" - "+this._VPC._PAD_DIRECTION+":",e+=this._VPC._PAD_NUM+", ",this._VPC._IS_TAPPED?e+="TAPPED,":e+=" - ,",this._VPC._IS_SWIPE?e+="SWIPED,":e+=" - ,"),this.add_label(e,"");break;case"RECORD_END":for(var a=t=_._CurrentR_Frame-20<1?1:_._CurrentR_Frame-20;a<t+20;a++)e=a+": ",e+=": "+_.GetData(a-1).toString(2),this.add_label(e,"");break;case"PLAY":e="[PLAY]",e+=_._CurrentP_Frame-1+": ",e+=_.GetData(_._CurrentP_Frame-1).toString(2),e+=" - "+this._VPC._PAD_DIRECTION+":",e+=this._VPC._PAD_NUM+", ",this._VPC._IS_TAPPED?e+="TAPPED,":e+=" - ,",this._VPC._IS_SWIPE?e+="SWIPED,":e+=" - ,",this.add_label(e,"")}return this.get_label()},t._VPC=cc.director.getScene().getChildByName("InputManager").getComponent("InputManager"),cc.assert(null!=t._VPC,"Can not find VPC"),t}return o(e,n),e}();e.exports=r,cc._RF.pop()},{DebugViewBase:"DebugViewBase",RecordManager:"RecordManager"}],SaveLoadManager:[function(t,e,i){"use strict";cc._RF.push(e,"dcef2OWCK9B8KCWCDFJfGdN","SaveLoadManager");var a=t("HistoryData"),s=cc.Class({extends:cc.Component,properties:{_show_log:"[XMLHttpRequest Test]\n",_time:0,_Label:null,_url_string:"",_sig:"sig=Eii6e636mz5J47sfqAYEK40jYAwoFqi3x5bxHkPG4Q4.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImlzc3VlZF9hdCI6MTUwMDM5ODY3NSwicGxheWVyX2lkIjoiMTI0OTUyNTMwMTc1MjIwMSIsInJlcXVlc3RfcGF5bG9hZCI6Im15X2ZpcnN0X3JlcXVlc3QifQ",_content_type:""},onLoad:function(){this._Label=this.node.getComponent(cc.Label),this._url_string="https://dev-dragon.papipugames.com/"},XHR_Create:function(t){var e=new XMLHttpRequest;return e.timeout=1e4,e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){if(a.connection_txt+="status: "+e.status+"\n",a.connection_txt+="response: "+e.responseText+"\n",cc.log("status: "+e.status),cc.log("response: "+e.responseText),"Load"==t){e.responseText,JSON.parse(e.responseText,function(t,e){"data"==t&&(a.result_data=e)});a.connection_txt+="DATA: "+a.result_data+"\n"}}else cc.log("Bad status: "+e.status),a.connection_txt+="Bad status: "+e.status+"\n"},e},push_button_Load:function(){a.connection_txt="",cc.log("Load"),a.connection_txt+="\n[Load] \n";var t=this.XHR_Create("Load");t.open("POST",this._url_string+"history/load/",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(this._sig+"&stage_id=1"),cc.log(this._sig+"&stage_id=1")},push_button_Save:function(){a.connection_txt="",cc.log("Save"),a.connection_txt+="\n[Save] \n";var t=this.XHR_Create("Save");t.open("POST",this._url_string+"history/save/",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(this._sig+"&data="+a.result_data+"&stage_id=1"),cc.log(this._sig+"&data="+a.result_data+"&stage_id=1")},push_button_Clear:function(){a.connection_txt=""},statics:{get_view:function(){return a.connection_txt}},update:function(t){this._Label.string=a.connection_txt}});e.exports=s,cc._RF.pop()},{HistoryData:"HistoryData"}],SaveLoadView:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}cc._RF.push(e,"aa96d4zFxFGNa4WDemJTPmQ","SaveLoadView");var n=t("DebugViewBase"),_=t("SaveLoadManager"),r=function(t){function e(){a(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.GetView=function(){return this.clear_label(),this.add_label("",_.get_view()),this.get_label()},t}return o(e,n),e}();e.exports=r,cc._RF.pop()},{DebugViewBase:"DebugViewBase",SaveLoadManager:"SaveLoadManager"}],SceneTransition:[function(t,e,i){"use strict";cc._RF.push(e,"b7736W75o9Ho75WLWcr5dkx","SceneTransition"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},SceneTransition_with_Name:function(t,e){cc.log("Scene Transition to "+e),cc.director.loadScene(e)}}),cc._RF.pop()},{}],ShootTypeAtkView:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}cc._RF.push(e,"94f46gRN7NK4IkkyqsVoqxY","ShootTypeAtkView");var n=t("AttackView"),_=function(t){function e(){a(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.GetView=function(){return this.createAttackView(this.AM.TYPE_SHOOT)},t}return o(e,n),e}();e.exports=_,cc._RF.pop()},{AttackView:"AttackView"}],StageBaseView:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}cc._RF.push(e,"cb257jYshVJB5x9UgqTnfTi","StageBaseView");var n=t("DebugViewBase"),_=function(t){function e(){a(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.GetView=function(){this.clear_label(),this.set_indent(!0),this.add_label("Rotation",this.StageBase.node.rotation);var t=22.5-this.GM.getStageRotation();return t<0&&(t+=360),this.add_label("Rotat 2 ",t),t/=45,this.add_label("Rotat 3 ",t),t=Math.floor(t),this.add_label("Rotat 4 ",t),this.add_label("Position",this.StageBase.node.position),this.add_label("Scale",this.StageBase.node.scale),this.get_label()},t.GM=cc.director.getScene().getChildByName("Canvas").getComponent("GameManager").GM_CLASS,t.StageBase=t.GM.STAGE_BASE.getComponent("StageBase"),t}return o(e,n),e}();e.exports=_,cc._RF.pop()},{DebugViewBase:"DebugViewBase"}],StageBase:[function(t,e,i){"use strict";cc._RF.push(e,"0c7e5iipoJBEZb+5yclo1J4","StageBase");var a=cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.log("************* Stage Base On load"),this.GM=cc.director.getScene().getChildByName("Canvas").getComponent("GameManager").GM_CLASS,cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(t,e){switch(t){case cc.KEY.left:a.Left=!0;break;case cc.KEY.right:a.Right=!0;break;case cc.KEY.up:a.Up=!0;break;case cc.KEY.down:a.Down=!0;break;case cc.KEY.w:a.keyW=!0;break;case cc.KEY.s:a.keyS=!0;break;case cc.KEY.a:a.keyA=!0;break;case cc.KEY.d:a.keyD=!0}},onKeyReleased:function(t,e){switch(t){case cc.KEY.left:a.Left=!1;break;case cc.KEY.right:a.Right=!1;break;case cc.KEY.up:a.Up=!1;break;case cc.KEY.down:a.Down=!1;break;case cc.KEY.w:a.keyW=!1;break;case cc.KEY.s:a.keyS=!1;break;case cc.KEY.a:a.keyA=!1;break;case cc.KEY.d:a.keyD=!1}}},this.node),this.charMove=new cc.Vec2(0,0),this.OriginalScale=this.node.scale,this.CharYPos=160,this.GM.setStageRotation(this.node.rotation)},start:function(){cc.log("************* Stage Base Start")},stageUpdate:function(){this.charMove.set(this.GM.getCharMove());var t=this.GM.getCameraTarget().DISTANCE,e=1920/(t=10*t/7);e>3&&(e=3),this.node.scale=e,this.node.y=576,this.node.rotation=180*this.GM.getCameraTarget().ANGLE/Math.PI,this.node.rotation<0?this.node.rotation+=360:this.node.rotation>360&&(this.node.rotation-=360),this.GM.setStageRotation(this.node.rotation)},update:function(t){a.Left&&(this.node.rotation+=1),a.Right&&(this.node.rotation-=1),a.Up&&(this.node.scale+=.01),a.Down&&(this.node.scale-=.01),a.keyW&&(this.node.y-=5),a.keyS&&(this.node.y+=5),a.keyA&&(this.node.x+=5),a.keyD&&(this.node.x-=5),this.stageUpdate()}});cc._RF.pop()},{}],"Test Map rotate":[function(t,e,i){"use strict";cc._RF.push(e,"f888fBKOTZFtbUMqfLtqYs2","Test Map rotate"),cc.Class({extends:cc.Component,properties:{VIRTUAL_PAD_CONTROL:{default:null,type:cc.Node}},onLoad:function(){cc.macro.ENABLE_TILEDMAP_CULLING=!1},update:function(t){if("idle"!=this.VIRTUAL_PAD_CONTROL.getComponent("VirtualPadControl")._CHAR_MOVE_MODE)switch(this.VIRTUAL_PAD_CONTROL.getComponent("VirtualPadControl")._PAD_DIRECTION){case"NONE":break;case"R":this.node.setRotation(this.node.getRotation()+3),cc.log("ROT R:"+this.node.rotation);break;case"L":this.node.setRotation(this.node.getRotation()-3),cc.log("ROT R:"+this.node.rotation);break;default:cc.log(this.VIRTUAL_PAD_CONTROL.getComponent("VirtualPadControl")._PAD_DIRECTION)}}}),cc._RF.pop()},{}],TestArray:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}cc._RF.push(e,"ed54dGlXB5HOoymwCyBc6Ac","TestArray");var s=function t(e,i,s,o){a(this,t),this.ID=e,this.position=new cc.Vec2(s,o),this.name=i};cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.Array1=[],this.aray_num=0;for(var t=0;t<10;t++)this.Array1[t]=new s(t,"TestArray:"+t,1*t,9*t),this.aray_num++;this.label=this.node.getComponent(cc.Label)},start:function(){},remove:function(){this.Array1[1].name="Removed:";var t=this.Array1[1];this.Array1[1]=this.Array1[this.aray_num-1],this.Array1[this.aray_num-1]=t;var e=this.Array1[this.aray_num-1].ID;this.Array1[this.aray_num-1].ID=this.Array1[1].ID,this.Array1[1].ID=e,this.aray_num--},update:function(t){for(var e="",i=0;i<10;i++)e+=i+": "+this.Array1[i].ID+" : "+this.Array1[i].name+" : "+this.Array1[i].position+"\n";e+="\n",this.label.string=e}}),cc._RF.pop()},{}],TiledMapComponent:[function(t,e,i){"use strict";cc._RF.push(e,"8acf5oxwZdFea3Xpkld7T8B","TiledMapComponent"),cc.Class({extends:cc.Component,properties:{CHIP:null,TILE:null},onLoad:function(){}}),cc._RF.pop()},{}],TiledRotateTest:[function(t,e,i){"use strict";cc._RF.push(e,"612e2FR5G1JErUJHbyUrWOs","TiledRotateTest"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},rotate_right:function(){this.node.setRotation(this.node.getRotation()+5),cc.log(this.node.getRotation())},rotate_left:function(){this.node.setRotation(this.node.getRotation()-5),this.node.rotate++,cc.log(this.node.getRotation())}}),cc._RF.pop()},{}],Util:[function(t,e,i){"use strict";cc._RF.push(e,"b91d0lxt1lJ77l9WEbTtyhA","Util");var a={getSuper:function(t){var e=t.prototype,i=e&&Object.getPrototypeOf(e);return i&&i.constructor},clear:function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)delete t[e[i]]},getPropertyDescriptor:function(t,e){for(;t;){var i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Object.getPrototypeOf(t)}return null}},s={get:null,set:null,enumerable:!1};a.getset=function(t,e,i,a,o){"function"!=typeof a&&(o=a,a=void 0),s.get=i,s.set=a,s.enumerable=o,Object.defineProperty(t,e,s),s.get=null,s.set=null};var o={get:null,enumerable:!1,configurable:!1};a.get=function(t,e,i,a,s){o.get=i,o.enumerable=a,o.configurable=s,Object.defineProperty(t,e,o),o.get=null};var n={set:null,enumerable:!1,configurable:!1};a.set=function(t,e,i,a,s){n.set=i,n.enumerable=a,n.configurable=s,Object.defineProperty(t,e,n),n.set=null},e.exports=a,cc._RF.pop()},{}],VirtualPadView:[function(t,e,i){"use strict";cc._RF.push(e,"5eb91Ul8MVBh5gc+d6QIwCv","VirtualPadView");var a=t("InputManager");cc.Class({extends:cc.Component,properties:{VPBodyPrefab:cc.Prefab,VPPickPrefab:cc.Prefab,_VP_Body:null,_VP_Pick:null,_Mode:"touchEnd",_FI_MAX:.2,_FO_MAX_TIME:.5,_FI_timer:0,_FO_timer:0},onLoad:function(){cc.log("      **** Virtual Pad View onLoad ****"),this._VP_Body=cc.instantiate(this.VPBodyPrefab),this._VP_Body.parent=this.node,this._VP_Pick=cc.instantiate(this.VPPickPrefab),this._VP_Pick.parent=this.node,a.setVuewCallBackFunc(this),this._VP_Body.opacity=0,this._VP_Pick.opacity=0,cc.log("        finished")},start:function(){},update:function(t){if(0!=this._FI_timer){this._FI_timer-=t,this._FI_timer<0&&(this._FI_timer=0);var e=255-1/this._FI_MAX*this._FI_timer*255;this._VP_Body.opacity<e&&(this._VP_Body.opacity=e,this._VP_Pick.opacity=e)}"touchEnd"==this._Mode&&0!=this._FO_timer&&(this._FO_timer-=t,this._FO_timer<0&&(this._FO_timer=0),this._FO_timer<.5&&(this._VP_Body.opacity=255*this._FO_timer*2,this._VP_Pick.opacity=255*this._FO_timer*2))},touchMove:function(t){this._VP_Pick.setPosition(t.getLocation())},touchStart:function(t){this._VP_Body.setPosition(t.getLocation()),this._VP_Pick.setPosition(t.getLocation()),this._Mode="touchStart",this._FI_timer=this._FI_MAX},touchEnd:function(t){this._Mode="touchEnd",this._FO_timer=this._FO_MAX_TIME}}),cc._RF.pop()},{InputManager:"InputManager"}],loadres_test:[function(t,e,i){"use strict";cc._RF.push(e,"15d90csnXJDCI97tNPUdE+w","loadres_test"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=new cc.Node("Character");t.setPosition(50,-18),t.anchorX=.5,t.anchorX=0,cc.loader.loadRes("Animationdata/c00/sprites/D/c00_D_idl_00",cc.SpriteFrame,function(e,i){if(e)cc.error(e.message||e);else{cc.log("Result should be a sprite frame: "+(i instanceof cc.SpriteFrame));var a=t.addComponent(cc.Sprite);a.spriteFrame=i,a.type=cc.Sprite.Type.SIMPLE,a.sizeMode=cc.Sprite.SizeMode.RAW,a.trim=!1}}),t.parent=this._BASE_NODE,t.addComponent(cc.Animation)}}),cc._RF.pop()},{}]},{},["CB-Animation","CB-Atk-c00","CB-Atk-c01","CB-Attack","CB-Callback","CB-Control","CB-Damage","CB-Init","CB-Jump","CB-Move","CB-Stage","CB-Status","Char-Container","CharacterBase","CharacterManager","DamageLabel","AttackBase","AttackManager","CM-SetCol","CollisionBase","CollisionManager","EffectBase","EffectManager","FixedUpdateManager","GameManager","StageBase","ControlData","BackToMenu","DebugLifeGauge","DebugMenu","AnimationView","AttackManagerView","AttackView","CharacterView","CircleView","CollisionView","DebugUtils","DebugViewBase","DragonDBGView","InputManagerView","ParentTypeAtkView","RecordView","SaveLoadView","ShootTypeAtkView","StageBaseView","Debug_MA_Change","Debug_MA_View","Debug_TargetMove","DragonBase","DragonManager","CC_Hit","CameraControl","GaugeControl","HistoryData","InputManager","LifeGauge","RecordManager","SaveLoadManager","SceneTransition","GetSetTest","ObjectPoolTest","Test Map rotate","TestArray","TiledRotateTest","loadres_test","TiledMapComponent","Util","VirtualPadView"]);